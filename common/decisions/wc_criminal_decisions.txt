#### Decisions to become Outlaw Government & Return to Feudalism ####
###by raged (dont hate my shit coding)

become_criminal_government_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_prison.dds" ##probably placeholder until we get artwork done
	
	desc = become_criminal_government_decision_desc
	selection_tooltip = become_criminal_government_decision_tooltip
	major = yes

	ai_check_interval = 100

	is_shown = {
			has_feudal_like_government = yes
			highest_held_title_tier < tier_kingdom
			
			OR = {
				has_trait = peasant_leader
				has_trait = reaver
				has_trait = torturer
				has_title = title:d_defias_brotherhood
				has_title = title:d_syndicate
			}
			custom_description = {
				text = recent_conversion_to_criminal_government
				NOT = { has_character_flag = just_converted_to_criminal_government }
			}
		}

	is_valid = {
		OR = {
			has_trait = peasant_leader
			has_trait = reaver
			has_trait = torturer
			has_title = title:d_defias_brotherhood
			has_title = title:d_syndicate
		}
		has_realm_law = crown_authority_0 
		highest_held_title_tier < tier_kingdom 
		prestige_level = 1 #placeholder until localisation gets added for 0 prestige, we only want disgraced people able to become criminals
	}

	is_valid_showing_failures_only = {
		is_alive = yes
		NOT = { exists = involved_activity }
		is_imprisoned = no
		is_incapable = no
	}

	effect = {
			# trigger_event = wc.criminal.event.001
		change_government = criminal_government
		add_prestige = { add = -800 }

		cost = {
			gold = 1000
		}

		ai_potential = {
			always = yes
		}

		ai_will_do = {
			base = 100
		}
	}
	hidden_effect = {
		add_character_flag = {
			flag = just_converted_to_criminal_government
			years = 5
		}
	}
}

## Revert back

stop_being_criminal_government_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_prison.dds" ##probably placeholder until we get artwork done

	major = yes
	desc = stop_being_criminal_government_decision_desc

	ai_check_interval = 100

	is_shown = {
		government_has_flag = government_is_criminal
	}
	is_valid = {
		is_independent_ruler = yes
		prestige_level >= 3
		capital_province.county = {
			development_level >= convert_to_feudalism_development_requirement
		}
		highest_held_title_tier >= tier_kingdom

	}

	cost = {
		gold = 1000 ##placeholder for discussion
		prestige = 5000 ##placeholder for discussion
	}

	effect = {
		change_government = feudal_government
		every_vassal = {
				limit = {
					government_has_flag = government_is_criminal
					}
				change_government = government_is_criminal
			}
	}

	ai_will_do = {
		base = 100
	}
}