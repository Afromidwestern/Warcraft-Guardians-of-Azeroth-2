# Warcraft
horde_invite_bloodthirsty_clans = {
	ai_check_interval = 6
	picture = "gfx/interface/illustrations/decisions/orcish_horde_army.dds"
	desc = horde_invite_bloodthirsty_clans_desc
	selection_tooltip = horde_invite_bloodthirsty_clans_tooltip
	major = yes

	is_shown = {
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:horde_invite_bloodthirsty_clans
			}
		}
		game_start_date < 585.1.1

		is_horde_invader_trigger = yes
	}

	is_valid = {
		dark_portal_is_opened_trigger = yes
		
		prestige_level >= 3

		domain_size >= 3
	}

	effect = {
		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:horde_invite_bloodthirsty_clans
		}
		
		show_as_tooltip = {
			custom_tooltip = horde_invite_bloodthirsty_clans_tooltip
		}
		hidden_effect = {
			trigger_event = WCHOI.9
		}
	}
	
	ai_will_do = {
		base = 100
	}
}

#############################################
# Taking the Blackrock Mountain				#
# by ElMariuso								#
#############################################
taking_blackrock_mountain_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	major = yes

	ai_check_interval = 120

	desc = taking_blackrock_mountain_decision_desc

	is_shown = {
		# Standard filter checks.
		###taking_blackrock_mountain_basic_filter_trigger = yes
		
		# Must be in the vague region.
		any_held_title = {
			tier = tier_county
			title_province = { geographical_region = world_europe_west_britannia }
		}
		
		# Cannot have an existing k_england.
		title:k_england = { is_title_created = no }
		
		
		# Can only be fired by someone in the Tribal Era (though their rival need not be).
		culture = {
			NOT = { has_cultural_era_or_later = culture_era_early_medieval }
		}
		
		# Not repeatable.
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:negotiate_the_danelaw_decision
			}
		}
	}

	is_valid = {
		# Some extra standard-ish filtering.
		negotiate_the_danelaw_additional_filter_trigger = yes
		# Should have a decent prestige level.
		prestige_level >= medium_prestige_level
		# Must have a valid opponent to negotiate with.
		custom_description = {
			text = negotiate_the_danelaw.valid_opponent.tt
			any_county_in_region = {
				region = world_europe_west_britannia
				holder = { negotiate_the_danelaw_valid_danelaw_opponent_trigger = yes }
			}
		}
		# And completely control any two duchies within k_england.
		custom_description = {
			text = negotiate_the_danelaw.controlled_duchies.tt
			any_held_title = {
				count >= 2
				tier = tier_duchy
				any_this_title_or_de_jure_above = { this = title:k_england }
				save_temporary_scope_as = de_jure_duchy
				root = { completely_controls = scope:de_jure_duchy }
			}
		}
		# Can only be fired by someone in the Tribal Era (though their rival need not be).
		## Reshow this here so players know they're on a timer.
		culture = {
			NOT = { has_cultural_era_or_later = culture_era_early_medieval }
		}
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}

	effect = {
		# We can't show the effects in the decision window, since they rely on scopes & the tooltips will error, so just display a preview tooltip instead.
		custom_tooltip = negotiate_the_danelaw.preview.tt
		custom_tooltip = negotiate_the_danelaw.clarification.tt
		trigger_event = british_isles.1011
		# Notifying other players is handled in the response event for scope:ntd_recipient, since they might reject it.
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:negotiate_the_danelaw_decision
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}