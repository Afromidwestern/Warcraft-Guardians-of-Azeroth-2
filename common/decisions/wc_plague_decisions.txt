purge_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_major_religion.dds"
	major = no

	ai_goal = yes

	is_shown = {
		is_landed = yes
		any_realm_county = {
			any_county_province = {
				has_province_modifier = plague_province_modifier
			}
		}
	}

	# widget = {
	# 	controller = create_holy_order
	# 	barony_valid = {
	# 		trigger_if = {
	# 			limit = { exists = this }
	# 			barony_is_valid_for_purge_trigger = { }
	# 		}
	# 		trigger_else = {
	# 			custom_description = {
	# 				text = "has_holy_order_barony_selected"
	# 				always = no
	# 			}
	# 		}
	# 	}
	# }

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	# is_valid = {
		# custom_description = {
		# 	text = "has_plagued_baronies"
		# 	any_held_county = {
		# 		any_in_de_jure_hierarchy = {
		# 			barony_is_valid_for_purge_trigger = { }
		# 		}
		# 	}
		# }

	# }

	cost = {
		prestige = {
			value = purge_prestige_cost
		}
		piety = {
			value = purge_piety_cost
		}
	}

	effect = {
		custom_tooltip = purge_decision_effect_message

		# if = { # If you have no valid barony this will throw errors when you open the decision - we add this check to avoid that 
		# 	limit = {
		# 		exists = scope:barony
		# 	}

			trigger_event = WCSP.0001
		# }
	}
	
	ai_potential = {
		is_landed = yes

		any_realm_county = {
			any_county_province = {
				count >= 4
				has_province_modifier = plague_province_modifier
			}
		}

	}

	ai_will_do = {
		base = 200
	}
}
