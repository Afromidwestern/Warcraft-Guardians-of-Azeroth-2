# Warcraft
found_alliance_political_faction = {
	ai_check_interval = 6
	picture = "gfx/interface/illustrations/decisions/alliance_symbol.dds"
	desc = found_alliance_political_faction_desc
	selection_tooltip = found_alliance_political_faction_tooltip
	major = yes

	is_shown = {
		can_lead_union_flag_trigger = { faction = alliance landless = no }
		
		NOT = { this_union_exists_trigger = { faction = alliance } }
		
		has_alliance_religion_trigger = yes
		has_alliance_culture_trigger = yes
		
		# Before 603, factions can't be outside the EK
		this_union_region_trigger = yes
		# Lordaeron should form the Alliance
		trigger_if = {
			limit = { is_ai = yes }
			OR = {
				has_title = title:e_lordaeron
				NOT = { exists = title:e_lordaeron.holder }
				current_date >= 590.1.1
			}
		}
		
		union_reason_exists_trigger = { faction = alliance }
	}

	is_valid = {
		has_this_union_cooldown_trigger = no
		NOT = { has_union_creation_cooldown_trigger = { faction = alliance } }
		
		realm_size >= this_union_leader_realm_size

		trigger_if = {
			limit = { highest_held_title_tier >= tier_empire }
			# Nothing
		}
		trigger_else = {
			diplomacy >= 10
		}
	}

	effect = {
		save_scope_as = faction_leader
		
		set_this_union_cooldown_effect = yes
		
		stress_impact = {
			shy = medium_stress_gain
		}
		
		become_leader_of_union_flag_effect = {
			faction = alliance
			give_modifiers = yes
		}
		
		every_player = {
			trigger_event = WCPLF.100
		}
	}
	
	ai_will_do = {
		base = 100
	}
}
join_alliance = {
	ai_check_interval = 24
	picture = "gfx/interface/illustrations/decisions/alliance_symbol.dds"
	desc = join_alliance_desc
	selection_tooltip = join_alliance_tooltip
	major = yes
	
	is_shown = {
		has_global_variable_list = all_unions
		any_in_global_list = {
			variable = all_unions
			var:this_union = flag:alliance
			save_temporary_scope_as = possible_union
		}
		can_be_in_union_trigger = { UNION = possible_union landless = no }
		
		is_in_any_this_union_trigger = no
		
		# Before 603, factions can't be outside the EK
		this_union_region_trigger = yes
	}

	is_valid = {
		has_this_union_cooldown_trigger = no
		
		can_join_union_trigger = { faction = alliance }
	}

	effect = {
		set_this_union_cooldown_effect = yes
		
		request_this_union_joining_effect = { faction = alliance }
	}
	
	ai_will_do = {
		base = 1
		join_alliance_modifiers = yes
	}
}
leave_alliance = {
	ai_check_interval = 24
	picture = "gfx/interface/illustrations/decisions/alliance_symbol.dds"
	desc = leave_alliance_desc
	selection_tooltip = leave_alliance_tooltip
	major = yes
	
	is_shown = {
		is_in_this_union_trigger = { faction = alliance }
	}

	is_valid = {
		has_this_union_cooldown_trigger = no
		
		can_leave_union_trigger = yes
	}

	effect = {
		# set_this_union_cooldown_effect = yes
		
		leave_or_break_this_union_effect = yes
	}
	
	ai_will_do = {
		base = 0
		modifier = {
			add = 100
			any_in_global_list = {
				variable = all_unions
				var:this_union = root.var:this_union
				story_owner = { save_temporary_scope_as = union_leader }
			}
			NOT = { ai_has_joining_union_opinion_trigger = { target = scope:union_leader } }
		}
		modifier = {
			factor = 0
			leads_this_union_trigger = { faction = alliance }
		}
	}
}

found_horde_political_faction = {
	ai_check_interval = 6
	picture = "gfx/interface/illustrations/decisions/horde_symbol.dds"
	desc = found_horde_political_faction_desc
	selection_tooltip = found_horde_political_faction_tooltip
	major = yes

	is_shown = {
		can_lead_union_flag_trigger = { faction = horde landless = no }
		
		NOT = { this_union_exists_trigger = { faction = horde } }
		
		# Before 603, factions can't be outside the EK
		this_union_region_trigger = yes
		
		union_reason_exists_trigger = { faction = horde }
	}

	is_valid = {
		has_this_union_cooldown_trigger = no
		NOT = { has_union_creation_cooldown_trigger = { faction = horde } }
		
		realm_size >= this_union_leader_realm_size

		trigger_if = {
			limit = { highest_held_title_tier >= tier_empire }
			# Nothing
		}
		trigger_else = {
			diplomacy >= 10
		}
	}

	effect = {
		save_scope_as = faction_leader
		
		set_this_union_cooldown_effect = yes
		
		stress_impact = {
			shy = medium_stress_gain
		}
		
		become_leader_of_union_flag_effect = {
			faction = horde
			give_modifiers = yes
		}
		
		every_player = {
			trigger_event = WCPLF.100
		}
	}
	
	ai_will_do = {
		base = 100
	}
}
join_horde = {
	ai_check_interval = 24
	picture = "gfx/interface/illustrations/decisions/horde_symbol.dds"
	desc = join_horde_desc
	selection_tooltip = join_horde_tooltip
	major = yes
	
	is_shown = {
		has_global_variable_list = all_unions
		any_in_global_list = {
			variable = all_unions
			var:this_union = flag:horde
			save_temporary_scope_as = possible_union
		}
		can_be_in_union_trigger = { UNION = possible_union landless = no }
		
		is_in_any_this_union_trigger = no
		
		# Before 603, factions can't be outside the EK
		this_union_region_trigger = yes
	}

	is_valid = {
		has_this_union_cooldown_trigger = no
		
		can_join_union_trigger = { faction = horde }
	}

	effect = {
		set_this_union_cooldown_effect = yes
		
		request_this_union_joining_effect = { faction = horde }
	}
	
	ai_will_do = {
		base = 1
		join_horde_modifiers = yes
	}
}
leave_horde = {
	ai_check_interval = 24
	picture = "gfx/interface/illustrations/decisions/horde_symbol.dds"
	desc = leave_horde_desc
	selection_tooltip = leave_horde_tooltip
	major = yes
	
	is_shown = {
		is_in_this_union_trigger = { faction = horde }
	}

	is_valid = {
		has_this_union_cooldown_trigger = no
		
		can_leave_union_trigger = yes
	}

	effect = {
		# set_this_union_cooldown_effect = yes
		
		leave_or_break_this_union_effect = yes
	}
	
	ai_will_do = {
		base = 0
		modifier = {
			add = 100
			any_in_global_list = {
				variable = all_unions
				var:this_union = root.var:this_union
				story_owner = { save_temporary_scope_as = union_leader }
			}
			NOT = { ai_has_joining_union_opinion_trigger = { target = scope:union_leader } }
		}
		modifier = {
			factor = 0
			leads_this_union_trigger = { faction = horde }
		}
	}
}

found_custom_political_faction = {
	ai_check_interval = 12
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	desc = found_horde_political_faction_desc
	selection_tooltip = found_horde_political_faction_tooltip
	major = yes

	is_shown = {
		can_lead_union_flag_trigger = { faction = custom landless = no }
		
		NOT = { this_union_exists_trigger = { faction = custom } }
		
		# Before 603, factions can't be outside the EK
		this_union_region_trigger = yes
		
		union_reason_exists_trigger = { faction = custom }
	}

	is_valid = {
		has_this_union_cooldown_trigger = no
		NOT = { has_union_creation_cooldown_trigger = { faction = custom } }
		
		realm_size >= this_union_leader_realm_size

		trigger_if = {
			limit = { highest_held_title_tier >= tier_empire }
			# Nothing
		}
		trigger_else = {
			diplomacy >= 10
		}
	}

	effect = {
		save_scope_as = faction_leader
		save_scope_value_as = { name = creating_custom value = flag:yes }
		
		set_this_union_cooldown_effect = yes
		
		stress_impact = {
			shy = medium_stress_gain
		}
		
		show_as_tooltip = {
			become_leader_of_union_flag_effect = {
				faction = custom
				give_modifiers = yes
			}
		}
		
		trigger_event = WCPLF.330
	}
	
	ai_potential = {
		always = no
	}
	
	ai_will_do = {
		base = 100
	}
}
join_custom = {
	ai_check_interval = 24
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	desc = join_horde_desc
	selection_tooltip = join_horde_tooltip
	major = yes
	
	is_shown = {
		has_global_variable_list = all_unions
		any_in_global_list = {
			variable = all_unions
			var:this_union = flag:custom
			save_temporary_scope_as = possible_union
		}
		can_be_in_union_trigger = { UNION = possible_union landless = no }
		
		is_in_any_this_union_trigger = no
		
		# Before 603, factions can't be outside the EK
		this_union_region_trigger = yes
	}

	is_valid = {
		has_this_union_cooldown_trigger = no
		
		can_join_union_trigger = { faction = custom }
	}

	effect = {
		set_this_union_cooldown_effect = yes
		
		request_this_union_joining_effect = { faction = custom }
	}
	
	ai_will_do = {
		base = 1
		join_custom_union_modifiers = yes
	}
}
leave_custom = {
	ai_check_interval = 24
	picture = "gfx/interface/illustrations/decisions/decision_realm.dds"
	desc = leave_horde_desc
	selection_tooltip = leave_horde_tooltip
	major = yes
	
	is_shown = {
		is_in_this_union_trigger = { faction = custom }
	}

	is_valid = {
		#has_this_union_cooldown_trigger = no
		
		can_leave_union_trigger = yes
	}

	effect = {
		# set_this_union_cooldown_effect = yes
		
		leave_or_break_this_union_effect = yes
	}
	
	ai_will_do = {
		base = 0
		modifier = {
			add = 100
			any_in_global_list = {
				variable = all_unions
				var:this_union = root.var:this_union
				story_owner = { save_temporary_scope_as = union_leader }
			}
			NOT = { ai_has_joining_union_opinion_trigger = { target = scope:union_leader } }
		}
		modifier = {
			factor = 0
			leads_this_union_trigger = { faction = custom }
		}
	}
}