wc_base_mana_value = {
	add = 100

	if = {
		limit = { has_trait = magic_good_noninheritable }
		add = 75
	}
	else_if = {
		limit = { has_trait = magic_good_noninheritable }
		add = 30
	}

	if = {
		limit = { has_trait = magic_good_1 }
		add = 50
	}
	else_if = {
		limit = { has_trait = magic_good_2 }
		add = 100
	}
	else_if = {
		limit = { has_trait = magic_good_3 }
		add = 150
	}
	else_if = {
		limit = { has_trait = magic_bad_1 }
		subtract = 25
	}
	else_if = {
		limit = { has_trait = magic_bad_2 }
		subtract = 50
	}
	else_if = {
		limit = { has_trait = magic_bad_3 }
		subtract = 75
	}
}

wc_mana_per_perk_point = {
	add = 10
	if = {
		limit = { has_trait = magic_good_noninheritable }
		add = 5
	}
	else_if = {
		limit = { has_trait = magic_good_noninheritable }
		subtract = 5
	}
}

wc_max_mana_value = {
	add = light_magic_lifestyle_perks
	add = shadow_magic_lifestyle_perks
	add = disorder_magic_lifestyle_perks
	add = order_magic_lifestyle_perks
	add = life_magic_lifestyle_perks
	add = death_magic_lifestyle_perks
	add = elemental_magic_lifestyle_perks

	add = light_magic_lifestyle_perk_points
	add = shadow_magic_lifestyle_perk_points
	add = disorder_magic_lifestyle_perk_points
	add = order_magic_lifestyle_perk_points
	add = life_magic_lifestyle_perk_points
	add = death_magic_lifestyle_perk_points
	add = elemental_magic_lifestyle_perk_points

	multiply = wc_mana_per_perk_point

	add = wc_base_mana_value

	if = {
		limit = { has_variable = wc_locked_mana_variable }
		subtract = var:wc_locked_mana_variable
	}
}

wc_mana_regeneration_value = 1

# Progressbars

wc_max_mana_value_progressbar = {
	add = wc_max_mana_value
	if = {
		limit = { has_variable = wc_locked_mana_variable }
		add = var:wc_locked_mana_variable
	}
}
wc_current_mana_progressbar_value = {
	if = {
		limit = { has_variable = wc_current_mana_variable }
		add = var:wc_current_mana_variable
	}
	divide = wc_max_mana_value_progressbar
}
wc_locked_mana_progressbar_value = {
	if = {
		limit = { has_variable = wc_locked_mana_variable }
		add = var:wc_locked_mana_variable
	}
	divide = wc_max_mana_value_progressbar
}