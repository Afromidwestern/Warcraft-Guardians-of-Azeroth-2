become_undead_effect = {
	become_undead_no_notification_effect = yes
	
	send_being_notifications_effect = yes		# Memory leak 2 GB of OM
}
become_undead_no_notification_effect = {
	add_trait = being_undead
	
	check_available_government_event_effect = yes	 # Memory leak 4 GB of OM
}
raise_undead_by_effect = {
	if = {
		limit = { is_ruler = yes }
		depose = yes	# Abdication to join as courtier
	}
	
	become_undead_effect = yes
	set_character_faith = $MASTER$.faith
	set_culture_same_as = $MASTER$
	
	add_trait = disinherited # Since belived to be dead
	
	$MASTER$ = { recruit_courtier = prev }
	add_opinion = { modifier = loyal_undead target = $MASTER$ }
}

become_demon_effect = {
	add_trait = being_demon
}
become_being_void_effect = {
	add_trait = being_void
}
become_being_life_effect = {
	add_trait = being_life
}
become_being_order_effect = {
	add_trait = being_order
}
become_being_light_effect = {
	add_trait = being_light
}

send_being_notifications_effect = {
	save_scope_as = lost_character
	
	every_consort = {
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	if = {
		limit = {
			exists = betrothed
			betrothed = { valid_being_notification_target_trigger = yes }
		}
		betrothed = {
			add_to_list = being_notified_list
		}
	}
	every_close_family_member = {
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	every_relation = {
		type = lover
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	every_relation = {
		type = potential_lover
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	every_relation = {
		type = crush
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	every_relation = {
		type = friend
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	every_relation = {
		type = potential_friend
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	every_relation = {
		type = guardian
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	every_relation = {
		type = ward
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	
	every_relation = {
		type = best_friend
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	every_relation = {
		type = soulmate
		limit = { valid_being_notification_target_trigger = yes }
		add_to_list = being_notified_list
	}
	
	every_in_list = {
		list = being_notified_list
		trigger_event = {
			id = WCBEI.10
			delayed = yes
		}
	}
}

return_to_twisting_nether_effect = {
	custom_description = {
		text = return_to_twisting_nether_tooltip

		trigger_event = WCBEI.100
	}
}
return_from_twisting_nether_effect = {
	custom_description = {
		text = return_from_twisting_nether_tooltip

		trigger_event = { id = WCBEI.110 years = { 5 10 } }
	}
}