get_pol_faction_variables_effect = {
	save_temporary_scope_as = effect_root
	
	clear_pol_faction_variables_effect = yes
	
	set_variable = {
		name = gui_pol_faction_name
		value = flag:$faction$
	}
	
	set_variable = {
		name = gui_pol_faction_strength
		value = 0
	}
	
	# Leader
	if = {
		limit = { exists = global_var:$faction$_leader }
		global_var:$faction$_leader = {
			scope:effect_root = {
				set_variable = {
					name = gui_pol_faction_leader
					value = prev
				}
			}
			# Heir
			primary_heir = {
				if = {
					limit = { can_lead_faction_trigger = { faction = $faction$ landless = yes } }
					scope:effect_root = {
						set_variable = {
							name = gui_pol_faction_heir
							value = prev
						}
					}
				}
			}
		}
	
		# Members
		every_in_global_list = {
			variable = $faction$_members
			if = {
				limit = { NOT = { this = global_var:$faction$_leader } }
				scope:effect_root = {
					add_to_variable_list = {
						name = gui_pol_faction_members
						target = prev
					}
				}
			}
			# Strength
			scope:effect_root = {
				change_variable = {
					name = gui_pol_faction_strength
					add = prev.max_military_strength
				}
			}
		}
	
		# Vice Leader
		ordered_in_global_list = {
			variable = $faction$_members
			limit = {
				NOT = { this = global_var:$faction$_leader }
				can_lead_faction_trigger = { faction = $faction$ landless = no }
			}
			order_by = pol_faction_leader_values
			max = 1
		
			scope:effect_root = {
				set_variable = {
					name = gui_pol_faction_vice_leader
					value = prev
				}
			}
		}
	}
}
# Used in normal effects to tell when it's time to update info
try_to_update_pol_faction_info_effect = {
	every_player = {
		limit = {
			exists = var:gui_pol_faction_name
			var:gui_pol_faction_name = flag:$faction$
		}
		get_pol_faction_variables_effect = { faction = $faction$ }
	}
}
clear_pol_faction_variables_effect = {
	remove_variable = gui_pol_faction_name
	
	remove_variable = gui_pol_faction_leader
	clear_variable_list = gui_pol_faction_members
	remove_variable = gui_pol_faction_strength
	remove_variable = gui_pol_faction_heir
	remove_variable = gui_pol_faction_vice_leader
}