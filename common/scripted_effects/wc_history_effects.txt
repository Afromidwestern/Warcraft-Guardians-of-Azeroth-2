purge_historical_character_effect = {
	set_to_lowborn = yes
	# Basically reset parents
	if = {
		limit = { exists = father }
		set_father = dummy_male
	}
	if = {
		limit = { exists = real_father }
		set_real_father = dummy_male
	}
	if = {
		limit = { exists = mother }
		set_real_father = dummy_female
	}
	death = { death_reason = death_vanished }
}

add_patron_trait_character_effect = {
	# May add traits here later
}
add_fan_trait_character_effect = {
	# May add traits here later
}

add_1_perk_in_TYPE_TREE_effect = {
	# if = {
		# limit = {
			# perks_in_tree = { tree = $TYPE$_tree_$TREE$ value < 9 }
		# }

		if = { # switch breaks it somehow
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_1 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_1
		}
		else_if = {
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_2 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_2
		}
		else_if = {
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_3 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_3
		}
		else_if = {
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_4 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_4
		}
		else_if = {
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_5 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_5
		}
		else_if = {
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_6 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_6
		}
		else_if = {
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_7 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_7
		}
		else_if = {
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_8 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_8
		}
		else_if = {
			limit = {
				NOT = { has_perk = $TYPE$_tree_$TREE$_perk_9 }
			}

			add_perk = $TYPE$_tree_$TREE$_perk_9
		}
		else = { add_$TYPE$_lifestyle_perk_points = 1 }

	# }
}

add_perks_in_nonelemental_MAGIC_lifestyle_effect = {
	if = {
		limit = { has_variable = wc_$MAGIC$_magic_lifestyle_additional_perks_variable }

		if = {
			limit = {
				has_character_flag = wc_$MAGIC$_magic_lifestyle_perks_were_reset_flag
			}

			add_$MAGIC$_magic_lifestyle_perk_points = var:wc_$MAGIC$_magic_lifestyle_additional_perks_variable
		}
		else = {
			while = {
				count = var:wc_$MAGIC$_magic_lifestyle_additional_perks_variable

				random_list = {
					1 = {
						trigger = {
							perks_in_tree = { tree = $MAGIC$_magic_tree_1 value < 9 }
						}

						add_1_perk_in_TYPE_TREE_effect = { TYPE = $MAGIC$_magic TREE = 1 }
					}
					1 = {
						trigger = {
							perks_in_tree = { tree = $MAGIC$_magic_tree_2 value < 9 }
						}

						add_1_perk_in_TYPE_TREE_effect = { TYPE = $MAGIC$_magic TREE = 2 }
					}
					1 = {
						trigger = {
							perks_in_tree = { tree = $MAGIC$_magic_tree_3 value < 9 }
						}

						add_1_perk_in_TYPE_TREE_effect = { TYPE = $MAGIC$_magic TREE = 3 }
					}
				}
			}	
		}
	}
}

add_perks_in_elemental_MAGIC_lifestyle_effect = {
	if = {
		limit = { has_variable = wc_$MAGIC$_magic_lifestyle_additional_perks_variable }

		if = {
			limit = {
				has_character_flag = wc_$MAGIC$_magic_lifestyle_perks_were_reset_flag
			}

			add_$MAGIC$_magic_lifestyle_perk_points = var:wc_$MAGIC$_magic_lifestyle_additional_perks_variable
		}
		else = {
			while = {
				count = var:wc_$MAGIC$_magic_lifestyle_additional_perks_variable

				random_list = {
					1 = {
						trigger = {
							perks_in_tree = { tree = $MAGIC$_magic_tree_1 value < 9 }
						}

						add_1_perk_in_TYPE_TREE_effect = { TYPE = $MAGIC$_magic TREE = 1 }
					}
					1 = {
						trigger = {
							perks_in_tree = { tree = $MAGIC$_magic_tree_2 value < 9 }
						}

						add_1_perk_in_TYPE_TREE_effect = { TYPE = $MAGIC$_magic TREE = 2 }
					}
				}
			}	
		}
	}
}

add_perks_in_physical_lifestyle_effect = {
	if = {
		limit = {
			OR = {
				has_variable = wc_warrior_lifestyle_additional_perks_variable
				has_variable = wc_rogue_lifestyle_additional_perks_variable
				has_variable = wc_hunter_lifestyle_additional_perks_variable
			}
		}

		set_variable = { name = wc_physical_lifestyle_additional_perks_variable value = 0 days = 10 }
		if = {
			limit = { has_variable = wc_warrior_lifestyle_additional_perks_variable }
			change_variable = { name = wc_physical_lifestyle_additional_perks_variable add = var:wc_warrior_lifestyle_additional_perks_variable }
		}
		if = {
			limit = { has_variable = wc_rogue_lifestyle_additional_perks_variable }
			change_variable = { name = wc_physical_lifestyle_additional_perks_variable add = var:wc_rogue_lifestyle_additional_perks_variable }
		}
		if = {
			limit = { has_variable = wc_hunter_lifestyle_additional_perks_variable }
			change_variable = { name = wc_physical_lifestyle_additional_perks_variable add = var:wc_hunter_lifestyle_additional_perks_variable }
		}

		# while = {
			# count = var:wc_physical_lifestyle_additional_perks_variable

			# random_list = {
				# 1 = {
					# trigger = {
						# perks_in_tree = { tree = physical_tree_1 value < 9 }
					# }

					# modifier = {
						# factor = 3

						# OR = {
							# has_variable = wc_warrior_lifestyle_additional_perks_variable
							# has_variable = wc_hunter_lifestyle_additional_perks_variable
						# }
					# }

					# add_1_perk_in_TYPE_TREE_effect = { TYPE = physical TREE = 1 }
				# }
				# 1 = {
					# trigger = {
						# perks_in_tree = { tree = physical_tree_2 value < 9 }
					# }

					# modifier = {
						# factor = 5

						# has_variable = wc_rogue_lifestyle_additional_perks_variable
					# }
					# modifier = {
						# factor = 3

						# has_variable = wc_hunter_lifestyle_additional_perks_variable
					# }

					# add_1_perk_in_TYPE_TREE_effect = { TYPE = physical TREE = 2 }
				# }
				# 1 = {
					# trigger = {
						# perks_in_tree = { tree = physical_tree_3 value < 9 }
					# }

					# modifier = {
						# factor = 5

						# has_variable = wc_warrior_lifestyle_additional_perks_variable
					# }
					# modifier = {
						# factor = 3

						# has_variable = wc_rogue_lifestyle_additional_perks_variable
					# }

					# add_1_perk_in_TYPE_TREE_effect = { TYPE = physical TREE = 3 }
				# }
			# }
		# }
	}
}