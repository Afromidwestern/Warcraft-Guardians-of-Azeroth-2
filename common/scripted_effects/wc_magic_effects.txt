learn_spell_effect = {
	if = {
		limit = {
			can_learn_spell_trigger = {
				CLASS = $CLASS$
				SPELL_NAME = $SPELL_NAME$
			}
		}
		add_to_variable_list = {
			name = known_$CLASS$_spells
			target = flag:$SPELL_NAME$
		}
	}
}

scoped_spell_to_cast_effect = { # might remove this and add to sgui
	switch = {
		trigger = $SPELL$

	}
}

change_elemental_favour_effect = {
	if = {
		limit = {
			has_variable = wc_elemental_$TYPE$_favour_variable
		} 
		# nothing
	}
	else = {
		set_variable = {
			name = wc_elemental_$TYPE$_favour_variable
			value = wc_elemental_$TYPE$_favour_current_value
		}
	}
	change_variable = {
		name = wc_elemental_$TYPE$_favour_variable
		$CHANGE$ = $VALUE$
	}
}

cast_elemental_spell_effect = { # Works for tooltips ?
	set_variable = { # Remove the mana from the character
		name = current_spell_rank
		value = $RANK_VALUE$ # this might already be set by the gui, will check
	}
	wc_change_mana_by_value_effect = {
		CHANGE = subtract
		VALUE = wc_spell_$SPELL_NAME$_cost_mana_value
	}
	cast_$SPELL_NAME$_effect = {
		TARGET_OR_LIST = $TARGET_OR_LIST$
		ELEMENTAL_TYPE = $ELEMENTAL_TYPE$
		CHANNEL = $CHANNEL$
		RANK_VALUE = $RANK_VALUE$ 
	}
	set_variable = {
		name = elemental_favour_change
		value = {
			add = wc_spell_$SPELL_NAME$_cost_mana_value
			multiply = 0.5
		}
	}
	if = {
		limit = {
			$ELEMENTAL_TYPE$ = flag:spirit
		}
		change_elemental_favour_effect = {
			TYPE = $ELEMENTAL_CLASS$
			CHANGE = add
			VALUE = var:elemental_favour_change
		}
	}
	else_if = {
		limit = {
			$ELEMENTAL_TYPE$ = flag:decay
		}
		change_elemental_favour_effect = {
			TYPE = $ELEMENTAL_CLASS$
			CHANGE = subtract
			VALUE = var:elemental_favour_change
		}
	}
}

cast_spell_effect = { # Works for tooltips
	set_variable = { # Remove the mana from the character
		name = current_spell_rank
		value = $RANK_VALUE$
	}
	wc_change_mana_by_value_effect = {
		CHANGE = subtract
		VALUE = wc_spell_$SPELL_NAME$_cost_mana_value
	}
	cast_$SPELL_NAME$_effect = {
		TARGET_OR_LIST = $TARGET_OR_LIST$
		CHANNEL = $CHANNEL$
		RANK_VALUE = $RANK_VALUE$
	}
}

cast_summon_fire_elemental_effect = {
	if = {
		limit = {
			flag:$CHANNEL$ = flag:no # cant channel this
		}
		switch = {
			trigger = $RANK_VALUE$
			1 = { 
				# get modifier
			}
			2 = {
				# get maa
			}
			3 = {
				# get maa but buffed
			}
		}
	}
}



