wc_MAGIC_magic_lifestyle_rank_up_check_effect = {
	if = {
		limit = {
			NOT = { has_trait = user_of_$MAGIC$_magic_5 } # Max level
		}

		if = {
			limit = {
				$MAGIC$_magic_lifestyle_perks >= 20
				has_trait = user_of_$MAGIC$_magic_4
			}
			change_trait_rank = { trait = wc_lifestyle_$MAGIC$_magic rank = 1 }
		}
		else_if = {
			limit = {
				$MAGIC$_magic_lifestyle_perks >= 15
				has_trait = user_of_$MAGIC$_magic_3
			}
			change_trait_rank = { trait = wc_lifestyle_$MAGIC$_magic rank = 1 }
		}
		else_if = {
			limit = {
				$MAGIC$_magic_lifestyle_perks >= 10
				has_trait = user_of_$MAGIC$_magic_2
			}
			change_trait_rank = { trait = wc_lifestyle_$MAGIC$_magic rank = 1 }
		}
		else_if = {
			limit = {
				$MAGIC$_magic_lifestyle_perks >= 5
				has_trait = user_of_$MAGIC$_magic_1
			}
			change_trait_rank = { trait = wc_lifestyle_$MAGIC$_magic rank = 1 }
		}
		else_if = {
			limit = { NOT = { has_trait = user_of_$MAGIC$_magic_1 } }
			add_trait = user_of_$MAGIC$_magic_1
		}
	}
}