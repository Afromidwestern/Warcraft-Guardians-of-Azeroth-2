wc_start_mana_regeneration_loop = {
	if = {
		limit = {
			NOT = { has_variable = wc_current_mana_variable }
			NOT = { has_variable = wc_mana_regeneration_started }
			wc_max_mana_value > 0
		}

		trigger_event = {
			on_action = wc_on_mana_regeneration_loop_start days = 1
		}
		set_variable = { name = wc_mana_regeneration_started value = yes }
	}
}

wc_regenerate_mana_effect = {
	if = {
		limit = { has_variable = wc_current_mana_variable }

		change_variable = { name = wc_current_mana_variable add = wc_mana_regeneration_value }
		wc_recalculate_mana_effect = yes
	}
	else = { set_variable = { name = wc_current_mana_variable value = wc_max_mana_value } }

	wc_recalculate_prowess_from_mana_effect = yes

}
wc_recalculate_mana_effect = {
	if = {
		limit = { var:wc_current_mana_variable > wc_max_mana_value }

		set_variable = { name = wc_current_mana_variable value = wc_max_mana_value }
	}
}

wc_recalculate_prowess_from_mana_effect = {
	remove_all_character_modifier_instances = wc_prowess_from_available_mana_modifier

	while = {
		count = wc_current_mana_to_prowess_value

		add_character_modifier = { modifier = wc_prowess_from_available_mana_modifier }
	}
}

# wc_spend_X_mana_effect = { change_variable = { name = wc_current_mana_variable add = $VALUE$ } }