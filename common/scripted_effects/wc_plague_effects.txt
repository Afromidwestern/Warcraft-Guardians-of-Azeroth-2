plague_county_effect = {
	spawn_plague_troops_effect = { PLACE = $PLACE$ PLAGUER = $PLAGUER$ }
	
	$PLACE$ = {
		save_scope_as = plagued_county
		
		set_county_culture = $PLAGUER$.culture
		set_county_faith = $PLAGUER$.faith
		
		change_development_level = -1
		add_county_modifier = {
			modifier = plagued_county_modifier
			years = 50
		}
	}
	
	# Notification
	$PLACE$.holder = {
		trigger_event = plague_outcome.5001
		every_liege_or_above = {
			trigger_event = plague_outcome.5001
		}
	}
}
spread_plague_county_effect = {
	show_as_tooltip = { spawn_plague_troops_effect = { PLACE = $PLACE$ PLAGUER = $PLAGUER$ } }
	
	custom_description = {
		text = spread_plague_county_effect
		trigger_event = {
			on_action = spread_plague_county
		}
	}
}
spawn_plague_troops_effect = {
	save_temporary_scope_value_as = {
		name = army_to_raise
		value = {
			value = 1
			add = $PLACE$.development_level
			multiply = 50
			min = 50
		}
	}
	$PLACE$.title_province = { save_temporary_scope_as = plagued_province }
	
	$PLAGUER$ = {
		if = {
			limit = { exists = scope:plague_army }
			spawn_army = {
				levies = scope:army_to_raise
				location = scope:plagued_province
				inheritable = yes
				uses_supply = no
				name = plague_troops
				save_scope_as = plague_army
				army = scope:plague_army
			}
		}
		else = {
			spawn_army = {
				levies = scope:army_to_raise
				location = scope:plagued_province
				inheritable = yes
				uses_supply = no
				name = plague_troops
				save_scope_as = plague_army
			}
		}
	}
}

plague_consequences_known_or_exposed_effect = {
	hostile_scheme_type_opinion_effect = {
		VICTIM = $VICTIM$
		ATTACKER = $PLAGUER$
		SCHEME_TYPE = plague
	}
}

# unknown_plague_effect { VICTIM: character scope of plagued player, PLAGUER: character scope of plaguing player, 
# PLACE: landed title scope of barony to be plagued}
# Effect when the plague happens and the plaguer is unknown for the other player. Calls plague_county_effect and
# triggers spread_plague_county in 6 months, so basically because spread_plague_county spreads too, the plague is spreaded
# from 1 barony to another every 6 months.
unknown_plague_effect = {
	$PLAGUER$ = {
		save_scope_as = plaguer
		#TODO - add secret if needed
	}

	$PLACE$ = {
		save_scope_as = plague_center
		
		spread_plague_county_effect = { PLACE = $PLACE$ PLAGUER = $PLAGUER$ }
	}
}

# known_plague_effect { VICTIM: character scope of plagued player, PLAGUER: character scope of plaguing player, 
# PLACE: landed title scope of barony to be plagued}
# Effect when the plague happens and the plaguer is known for the other player. Calls plague_county_effect and
# triggers spread_plague_county in 6 months, so basically because spread_plague_county spreads too, the plague is spreaded
# from 1 barony to another every 6 months.
known_plague_effect = {
	$PLAGUER$ = {
		save_scope_as = plaguer
	}

	$PLACE$ = {
		save_scope_as = plague_center

		spread_plague_county_effect = { PLACE = $PLACE$ PLAGUER = $PLAGUER$ }
	}
	
	$EXPOSER$ = {
		# For now do nothing
	}
}