on_expose_secret_plague_effect = {
	save_scope_as = secret
	scope:secret_target = {
		save_scope_as = victim
	}
	scope:secret_owner = {
		save_scope_as = plaguer
	}

	###EXPOSURE EVENTS###
	scope:plaguer = { trigger_event = wc_secrets.0115 } #Applies consequence effects

	scope:victim = {
		if = {
			limit = { is_alive = yes }
			if = {
				limit = { any_known_secret = { this = scope:secret } }
				add_character_flag = {
					flag = victim_knows
					days = 10
				}
			}
			trigger_event = wc_secrets.0116
		}
	}

	secret_exposed_notification_effect = yes
}

add_and_expose_secret_plague_attempt_effect = {
	add_secret = {
		type = secret_plague_attempt
		target = $TARGET$
	}
	random_secret = {
		limit = {
			secret_type = secret_plague_attempt
			secret_target = $TARGET$
		}
		expose_secret = $EXPOSER$
	}
}
add_and_expose_secret_plague_effect = {
	add_secret = {
		type = secret_plague
		target = $TARGET$
	}
	random_secret = {
		limit = {
			secret_type = secret_plague
			secret_target = $TARGET$
		}
		expose_secret = $EXPOSER$
	}
}