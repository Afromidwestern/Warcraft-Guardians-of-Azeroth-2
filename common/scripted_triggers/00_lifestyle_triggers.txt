# can_start_new_lifestyle_tree_trigger
# lifestyle_friend_trigger


can_start_new_lifestyle_tree_trigger = {
	OR = {
		NOR = {
			has_perk = benevolent_intent_perk
			has_perk = firm_hand_perk
		}
		has_perk = august_perk
	}
	OR = {
		NOR = {
			has_perk = befriend_perk
			has_perk = groomed_to_rule_perk
		}
		has_perk = family_man_perk
	}
	OR = {
		NOT = { has_perk = thoughtful_perk }
		has_perk = diplomat_perk
	}
	OR = {
		NOR = {
			has_perk = dark_insights_perk
			has_perk = dreadful_perk
		}
		has_perk = torturer_perk
	}
	OR = {
		NOT = { has_perk = truth_is_relative_perk }
		has_perk = schemer_perk
	}
	OR = {
		NOR = {
			has_perk = like_weed_in_a_garden_perk
			has_perk = enticing_opportunity_perk
		}
		has_perk = seducer_perk
	}
	OR = {
		NOT = { has_perk = anatomical_studies_perk }
		has_perk = whole_of_body_perk
	}
	OR = {
		NOR = {
			has_perk = pedagogy_perk
			has_perk = scientific_perk
		}
		has_perk = scholar_perk
	}
	OR = {
		NOT = { has_perk = faithful_perk }
		has_perk = theologian_perk
	}
	OR = {
		NOT = { has_perk = stalwart_leader_perk }
		has_perk = gallant_perk
	}
	OR = {
		NOT = { has_perk = serve_the_crown_perk }
		has_perk = overseer_perk
	}
	OR = {
		NOT = { has_perk = bellum_justum_perk }
		has_perk = strategist_perk
	}
	OR = {
		NOR = {
			has_perk = tax_man_perk
			has_perk = cutting_corners_perk
		}
		has_perk = architect_perk
	}
	OR = {
		NOT = { has_perk = meritocracy_perk }
		has_perk = administrator_perk
	}
	OR = {
		NOT = { has_perk = golden_obligations_perk }
		has_perk = avaricious_perk
	}

	# Warcraft
	OR = { # Light
		NOT = { has_perk = light_magic_tree_1_perk_1 }
		has_perk = light_magic_tree_1_perk_9
	}
	OR = {
		NOT = {
			has_perk = light_magic_tree_2_perk_1
			has_perk = light_magic_tree_2_perk_2
		}
		has_perk = light_magic_tree_2_perk_9
	}
	OR = {
		NOT = { has_perk = light_magic_tree_3_perk_1 }
		has_perk = light_magic_tree_3_perk_9
	}
	OR = { # Shadow
		NOT = { has_perk = shadow_magic_tree_1_perk_1 }
		has_perk = shadow_magic_tree_1_perk_9
	}
	OR = {
		NOT = {
			has_perk = shadow_magic_tree_2_perk_1
			has_perk = shadow_magic_tree_2_perk_2
		}
		has_perk = shadow_magic_tree_2_perk_9
	}
	OR = {
		NOT = {
			has_perk = shadow_magic_tree_3_perk_1
			has_perk = shadow_magic_tree_3_perk_2
		}
		has_perk = shadow_magic_tree_3_perk_9
	}
	OR = { # Disorder
		NOT = {
			has_perk = disorder_magic_tree_1_perk_1
			has_perk = disorder_magic_tree_1_perk_2
		}
		has_perk = disorder_magic_tree_1_perk_9
	}
	OR = {
		NOT = {
			has_perk = disorder_magic_tree_2_perk_1
			has_perk = disorder_magic_tree_2_perk_2
			has_perk = disorder_magic_tree_2_perk_3
			has_perk = disorder_magic_tree_2_perk_4
			has_perk = disorder_magic_tree_2_perk_5
			has_perk = disorder_magic_tree_2_perk_6
			has_perk = disorder_magic_tree_2_perk_7
			has_perk = disorder_magic_tree_2_perk_8
		}
		has_perk = disorder_magic_tree_2_perk_9
	}
	OR = {
		NOT = {
			has_perk = disorder_magic_tree_3_perk_1
			has_perk = disorder_magic_tree_3_perk_2
			has_perk = disorder_magic_tree_3_perk_3
			has_perk = disorder_magic_tree_3_perk_4
		}
		has_perk = disorder_magic_tree_3_perk_9
	}
	OR = { # Order
		NOT = { has_perk = order_magic_tree_1_perk_1 }
		has_perk = order_magic_tree_1_perk_9
	}
	OR = {
		NOT = { has_perk = order_magic_tree_2_perk_1 }
		has_perk = order_magic_tree_2_perk_9
	}
	OR = {
		NOT = {
			has_perk = order_magic_tree_3_perk_1
			has_perk = order_magic_tree_3_perk_2
		}
		has_perk = order_magic_tree_3_perk_9
	}
	OR = { # Life
		NOT = {
			has_perk = life_magic_tree_1_perk_1
			has_perk = life_magic_tree_1_perk_2
		}
		has_perk = life_magic_tree_1_perk_9
	}
	OR = {
		NOT = {
			has_perk = life_magic_tree_2_perk_1
			has_perk = life_magic_tree_2_perk_2
			has_perk = life_magic_tree_2_perk_3
			has_perk = life_magic_tree_2_perk_4
			has_perk = life_magic_tree_2_perk_5
		}
		has_perk = life_magic_tree_2_perk_9
	}
	OR = {
		NOT = {
			has_perk = life_magic_tree_3_perk_1
			has_perk = life_magic_tree_3_perk_2
			has_perk = life_magic_tree_3_perk_3
		}
		has_perk = life_magic_tree_3_perk_9
	}
	OR = { # Death
		NOT = {
			has_perk = death_magic_tree_1_perk_1
			has_perk = death_magic_tree_1_perk_2
			has_perk = death_magic_tree_1_perk_3
			has_perk = death_magic_tree_1_perk_4
			has_perk = death_magic_tree_1_perk_5
		}
		has_perk = death_magic_tree_1_perk_9
	}
	OR = {
		NOT = {
			has_perk = death_magic_tree_2_perk_1
			has_perk = death_magic_tree_2_perk_2
		}
		has_perk = death_magic_tree_2_perk_9
	}
	OR = {
		NOT = { has_perk = death_magic_tree_3_perk_1 }
		has_perk = death_magic_tree_3_perk_9
	}
	OR = { # Fire
		NOT = { has_perk = elemental_fire_magic_tree_1_perk_1 }
		has_perk = elemental_fire_magic_tree_1_perk_9
	}
	OR = { # Water
		NOT = { has_perk = elemental_water_magic_tree_1_perk_1 }
		has_perk = elemental_water_magic_tree_1_perk_1
	}
	OR = { # Air
		NOT = { has_perk = elemental_air_magic_tree_1_perk_1 }
		has_perk = elemental_air_magic_tree_1_perk_1
	}
	OR = { # Earth
		NOT = { has_perk = elemental_earth_magic_tree_1_perk_1 }
		has_perk = elemental_earth_magic_tree_1_perk_1
	}
}



##############################
# LIFESTYLE FRIEND TRIGGERS
##############################

#Trigger to check if a friend is a lifestyle friend
lifestyle_friend_trigger = {
	trigger_if = {
		limit = { $CHARACTER$ = { is_ai = yes } }
		OR = {
			has_focus = $FOCUS$
			is_ruler = no
		}
	}
	#If a player, check the friend points
	trigger_else = {
		$FOCUS$_friend_points > 0
	}
}

#Is the character available as a potential lifestyle friend for CHARACTER
potential_lifestyle_friend_availability_trigger = {
	lifestyle_friend_trigger = { CHARACTER = $CHARACTER$ FOCUS = $FOCUS$ }
	basic_is_available_ai = yes
	NOR = {
		has_relation_friend = $CHARACTER$
		has_relation_rival = $CHARACTER$
		is_at_war_with =  $CHARACTER$
	}
	is_adult = yes
	opinion = {
		target = $CHARACTER$
		value >= low_negative_opinion
	}
	save_temporary_scope_value_as = {
		name = trigger_focus
		value = flag:$FOCUS$
	}
	trigger_if = {
		limit = { scope:trigger_focus = flag:intrigue_temptation_focus }
		NOT = {
			dislikes_partner_cheating_trigger = { PARTNER = $CHARACTER$ }
		}
	}
}

has_focus_martial = {
	OR = {
		has_focus = martial_chivalry_focus
		has_focus = martial_authority_focus
		has_focus = martial_strategy_focus
	}
}

has_focus_learning = {
	OR = {
		has_focus = learning_theology_focus
		has_focus = learning_scholarship_focus
		has_focus = learning_medicine_focus
	}
}

has_focus_intrigue = {
	OR = {
		has_focus = intrigue_intimidation_focus
		has_focus = intrigue_temptation_focus
		has_focus = intrigue_skulduggery_focus
	}
}

has_focus_diplomacy = {
	OR = {
		has_focus = diplomacy_family_focus
		has_focus = diplomacy_majesty_focus
		has_focus = diplomacy_foreign_affairs_focus
	}
}

has_focus_stewardship = {
	OR = {
		has_focus = stewardship_domain_focus
		has_focus = stewardship_wealth_focus
		has_focus = stewardship_duty_focus
	}
}


#######################
# misc
#######################

has_focus_or_focus_trait_trigger = {
	save_temporary_scope_value_as = {
		name = trigger_focus
		value = flag:$FOCUS$
	}
	OR = {
		has_focus = $FOCUS$
		trigger_if = {
			limit = { scope:trigger_focus = flag:diplomacy_foreign_affairs_focus }
			has_trait = diplomat
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:diplomacy_majesty_focus }
			has_trait = august
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:diplomacy_family_focus }
			has_trait = family_first
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:martial_strategy_focus }
			has_trait = strategist
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:martial_authority_focus }
			has_trait = overseer
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:martial_chivalry_focus }
			has_trait = gallant
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:stewardship_wealth_focus }
			has_trait = avaricious
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:stewardship_domain_focus }
			has_trait = architect
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:stewardship_duty_focus }
			has_trait = administrator
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:intrigue_skulduggery_focus }
			has_trait = schemer
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:intrigue_temptation_focus }
			has_trait = seducer
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:intrigue_intimidation_focus }
			has_trait = torturer
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:learning_medicine_focus }
			has_trait = whole_of_body
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:learning_scholarship_focus }
			has_trait = scholar
		}
		trigger_else_if = {
			limit = { scope:trigger_focus = flag:learning_theology_focus }
			has_trait = theologian
		}
		trigger_else = {
			always = no
		}
	}
}