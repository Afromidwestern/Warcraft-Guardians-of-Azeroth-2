# TODO - if there's a secret concept for the whole plague thing
secret_plague_attempt_is_valid_trigger = {
	NOT = { $OWNER$ = $TARGET$ } # Murder requires two people

	trigger_if = { # If the target is dead, check that the killer isn't the owner since then the attempt isn't really an attempt...
		limit = {
			$TARGET$ = { is_alive = no }
			exists = $TARGET$.killer
		}
		NOT = {
			$TARGET$.killer = $OWNER$
		}
	}
}

# TODO - if there's a secret concept for the whole plague thing
secret_plague_attempt_is_shunned_trigger = {
	$TARGET$ = {
		save_temporary_scope_as = attempted_plague_target
	}
	$OWNER$ = {
		OR = {
			NOT = { exists = liege }
			any_liege_or_above = {
				NOR = {
					this = scope:attempted_plague_target
					is_spouse_of = scope:attempted_plague_target
					is_close_family_of = scope:attempted_plague_target
				}
			}
			#You are your own liege (independent) or have no liege (pool)
			liege = this
		}
	}
}

# TODO - if there's a secret concept for the whole plague thing
secret_plague_attempt_is_criminal_trigger = {
	$TARGET$ = {
		save_temporary_scope_as = attempted_plague_target
	}
	$OWNER$ = {
		any_liege_or_above = {
			NOR = {
				this = scope:attempted_plague_target
				is_spouse_of = scope:attempted_plague_target
				is_close_family_of = scope:attempted_plague_target
			}
		}
	}
}

is_vulnerable_to_plague_county_trigger = {
	NOT = { has_county_modifier = plagued_county_modifier }
	culture_group = culture_group:human_group
}
is_vulnerable_to_plague_character_trigger = {
	is_race_no_gene_trigger = { RACE = creature_human }
	can_become_undead_trigger = yes
}

any_held_county_is_vulnerable_to_plague_trigger = {
	custom_description = {
		text = any_held_county_is_vulnerable_to_plague_trigger
		any_held_title = {
			tier = tier_county
			is_vulnerable_to_plague_county_trigger = yes
		}
	}
}