### Can lead faction triggers
can_lead_faction_trigger = {
	save_temporary_scope_value_as = {
		name = temp_faction
		value = flag:$faction$
	}
	
	# Horde triggers
	trigger_if = {
		limit = { scope:temp_faction = flag:horde }
		has_title = title:e_horde
	}
	trigger_else = {
		NOT = { has_title = title:e_horde }
	}

	OR = {
		has_government = feudal_government
		has_government = clan_government
		has_government = tribal_government
	}
	
	common_faction_trigger = { faction = $faction$ }
}

### Can be in faction triggers
can_be_in_faction_trigger = {
	save_temporary_scope_value_as = {
		name = temp_faction
		value = flag:$faction$
	}
	
	# Horde triggers
	trigger_if = {
		limit = { scope:temp_faction = flag:horde }
	}
	trigger_else = {
		NOT = { has_title = title:e_horde }
	}
	
	pol_faction_exists_trigger = { faction = $faction$ }
	
	common_faction_trigger = { faction = $faction$ }
}

common_faction_trigger = {
	evil_public_religion_trigger = no
	
	is_alive = yes
	is_independent_ruler = yes
	holds_landed_title = yes
	
	OR = {
		is_in_any_pol_faction_trigger = no
		is_in_pol_faction_trigger = { faction = $faction$ }
	}
	
	OR = {
		has_government = feudal_government
		has_government = republic_government
		has_government = theocracy_government
		has_government = clan_government
		has_government = tribal_government
	}
	highest_held_title_tier >= tier_duchy #Dukes and higher
}

faction_reason_exists_trigger = {
	save_temporary_scope_value_as = {
		name = temp_faction
		value = flag:$faction$
	}
	
	OR = {
		trigger_if = {
			limit = { is_ai = no }
			current_date >= 608
		}
		
		# Alliance triggers
		trigger_if = {
			limit = { scope:temp_faction = flag:alliance }
			# The Horde exists
			pol_faction_exists_trigger = { faction = horde }
		}
		# Horde triggers
		trigger_if = {
			limit = { scope:temp_faction = flag:horde }
			# The Alliance exists
			pol_faction_exists_trigger = { faction = alliance }
		}
		
		ongoing_invasion_exists_trigger = yes
	}
}
pol_faction_exists_trigger = {
	exists = global_var:$faction$_leader
}

### Is in faction triggers
is_in_any_pol_faction_trigger = {
	exists = var:pol_faction
}
is_in_pol_faction_trigger = {
	is_in_any_pol_faction_trigger = yes
	var:pol_faction = flag:$faction$
}
is_in_same_faction_trigger = {
	var:pol_faction = $TARGET$.var:pol_faction
}

can_join_faction_trigger = {
	is_at_war = no
	
	in_diplomatic_range_trigger = { target = global_var:$faction$_leader }
	
	trigger_if = {
		limit = { is_ai = yes }
		is_aggressive_trigger = no
		NOT = {
			has_title = title:d_syndicate
			has_title = title:d_defias_brotherhood
		}
		
		global_variable_list_size = { name = $faction$_members value < 7 }
	}
}

# Before 603, factions can't be outside the EK
pol_faction_region_trigger = {
	OR = {
		capital_province = { geographical_region = world_eastern_kingdoms }
		current_date >= 603.1.1
	}
}