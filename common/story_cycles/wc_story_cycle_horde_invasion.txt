story_horde_invasion = {
	on_setup = {
		set_horde_characters_effect = yes
		# The Horde attacks Stormwind
		declare_war_on_stormwind_effect = yes
	}

	on_end = {
		debug_log = "Horde story ended on:"
		debug_log_date = yes
		set_global_variable = {
			name = horde_story_has_ended
			value = yes
		}
	}

	# Placeholder
	# TODO: The story should end when either Blackhand or Doomhammer aren't leading the Horde anymore
	on_owner_death = {
		set_variable = {
			name = end_of_story
			value = yes
		}
		if = {
			limit = {
				exists = var:end_of_story
			}
			end_story = yes
		}
	}
	
	# The story should pick another target for AI Horde to invade
	effect_group = {
		days = { 30 60 }

		trigger = {
			story_owner = {
				is_at_war = no
				gold > 0
				any_held_title = {
					this = title:e_horde
				}
			}
		}

		triggered_effect = {
			trigger = {
				story_owner = {
					is_ai = yes
				}
			}
			effect = {
				story_owner = {
					horde_war_target_evaluation_and_declaration_effect = yes
				}
				debug_log = "The story started a new war for the Horde"
				debug_log_date = yes
				story_owner = {
					save_scope_as = owner
				}
				debug_log_scopes = yes
			}
		}
	}
}
