namespace = wc_arthas_story

### Arthas gather a group to investigate the Plague. Uther (or trusted knight), Jaina (or trusted mage), Falric, Marwyn (or other trusted knights join)
wc_arthas_story.10 = {
	type = character_event
	title = wc_arthas_story_10_TITLE
	desc = wc_arthas_story_10_DESC
	theme = death
	override_background = {
		reference = farmland
	}
	right_portrait = {
		character = scope:activity_owner
		animation = personality_bold
	}
	left_portrait = {
		character = scope:uther
		animation = worry
	}
	
	immediate = {
		if = {
			limit = { root = scope:activity_owner }

			find_uther_effect = yes
			scope:uther = {
				join_arthas_expedition_effect = yes
			}

			find_jaina_effect = yes
			scope:jaina = {
				join_arthas_expedition_effect = yes
			}

			every_knight = {
				limit = {
					is_ai = yes	#Players decide themselves
					
					is_valid_arthas_expedition_member_trigger = yes
				}
				join_arthas_expedition_effect = yes
			}
		}
	}
	
	option = {
		trigger = { root = scope:activity_owner }
		name = wc_arthas_story_10_OPT_arthas
	}
	
	option = {
		trigger = {
			NOT = { root = scope:activity_owner }
			
			is_valid_arthas_expedition_member_trigger = yes
		}
		name = wc_arthas_story_10_OPT_A
		
		scope:activity = {
			accept_invitation_for_character = root
		}
		
		add_prestige = major_prestige_gain
		
		stress_impact = {
			brave = massive_stress_impact_loss
			diligent = medium_stress_impact_loss
			lazy = medium_stress_impact_gain
			craven = massive_stress_impact_gain
		}
		
		ai_chance = {
			base = 25
			
			stress_impact_ai_chance_modifier = { TRAIT = brave STRESS = massive_stress_impact_loss }
			stress_impact_ai_chance_modifier = { TRAIT = diligent STRESS = medium_stress_impact_loss }
			stress_impact_ai_chance_modifier = { TRAIT = lazy STRESS = medium_stress_impact_gain }
			stress_impact_ai_chance_modifier = { TRAIT = craven STRESS = massive_stress_impact_gain }
		}
	}
	option = {
		trigger = {
			NOT = { root = scope:activity_owner }
		}
		name = wc_arthas_story_10_OPT_B
		
		scope:activity = {
			decline_invitation_for_character = root
		}
		
		stress_impact = {
			paranoid = minor_stress_impact_gain
			brave = medium_stress_impact_gain
		}
		
		ai_chance = {
			base = 100
			
			stress_impact_ai_chance_modifier = { TRAIT = paranoid STRESS = minor_stress_impact_gain }
			stress_impact_ai_chance_modifier = { TRAIT = brave STRESS = medium_stress_impact_gain }
		}
	}
}
# Everything around looks dead, you find an abandoned farm, is attacked by undead inside, briefly see Kel'Thuzad
wc_arthas_story.15 = {
	type = character_event
	title = wc_arthas_story_10_TITLE
	desc = wc_arthas_story_15_DESC
	theme = death
	override_background = {
		reference = wc_androhal_by_dlikt
	}
	right_portrait = {
		character = scope:activity_owner
		animation = disgust
	}
	left_portrait = {
		character = scope:kelthuzad
		animation = personality_dishonorable
	}
	
	immediate = {
		if = {
			limit = { root = scope:activity_owner }
			find_kelthuzad_effect = yes
			every_participant = { trigger_event = wc_arthas_story.15 }
			
			trigger_event = { id = wc_arthas_story.20 days = 7 }
		}
		draenor_solo_battle_roll_effect = { RISK = 5 }
	}
	
	option = {
		name = wc_arthas_story_15_OPT_A
	}
}
# You meet Kel'Thuzad in Andorhal (or another plague center)
wc_arthas_story.20 = {
	type = character_event
	title = wc_arthas_story_10_TITLE
	desc = wc_arthas_story_20_DESC
	theme = death
	override_background = {
		reference = wc_androhal_by_dlikt
	}
	right_portrait = {
		character = scope:activity_owner
		animation = rage
	}
	left_portrait = {
		character = scope:kelthuzad
		animation = fear
	}
	
	immediate = {
		if = {
			limit = { root = scope:activity_owner }
			find_kelthuzad_effect = yes
			every_participant = { trigger_event = wc_arthas_story.20 }
		}
	}
	
	option = {
		name = wc_arthas_story_20_OPT_A
		
		draenor_solo_battle_roll_effect = { RISK = 10 }
		
		if = {
			limit = { root = scope:activity_owner }
			scope:kelthuzad = { override_death_killer_effect = { DEATH_REASON = death_battle KILLER = root } }
		}
	}
}
