namespace = wc_arthas_story

### Arthas gather a group to investigate the Plague. Uther (or trusted knight), Jaina (or trusted mage), Falric, Marwyn (or other trusted knights join)
wc_arthas_story.10 = {
	type = character_event
	title = wc_arthas_story_10_TITLE
	desc = wc_arthas_story_10_DESC
	theme = death
	override_background = {
		reference = farmland
	}
	right_portrait = {
		character = scope:activity_owner
		animation = personality_bold
	}
	left_portrait = {
		character = scope:uther
		animation = worry
	}
	
	immediate = {
		if = {
			limit = { root = scope:activity_owner }

			find_uther_effect = yes
			scope:uther = {
				join_arthas_expedition_effect = yes
			}

			find_jaina_effect = yes
			scope:jaina = {
				join_arthas_expedition_effect = yes
			}

			every_knight = {
				limit = {
					is_ai = yes	#Players decide themselves
					
					is_valid_arthas_expedition_member_trigger = yes
				}
				join_arthas_expedition_effect = yes
			}
		}
	}
	
	option = {
		trigger = { root = scope:activity_owner }
		name = wc_arthas_story_10_OPT_arthas
	}
	
	option = {
		trigger = {
			NOT = { root = scope:activity_owner }
			
			is_valid_arthas_expedition_member_trigger = yes
		}
		name = wc_arthas_story_10_OPT_A
		
		join_arthas_expedition_effect = yes
		
		add_prestige = major_prestige_gain
		
		stress_impact = {
			brave = massive_stress_impact_loss
			diligent = medium_stress_impact_loss
			lazy = medium_stress_impact_gain
			craven = massive_stress_impact_gain
		}
		
		ai_chance = {
			base = 25
			
			stress_impact_ai_chance_modifier = { TRAIT = brave STRESS = massive_stress_impact_loss }
			stress_impact_ai_chance_modifier = { TRAIT = diligent STRESS = medium_stress_impact_loss }
			stress_impact_ai_chance_modifier = { TRAIT = lazy STRESS = medium_stress_impact_gain }
			stress_impact_ai_chance_modifier = { TRAIT = craven STRESS = massive_stress_impact_gain }
		}
	}
	option = {
		trigger = {
			NOT = { root = scope:activity_owner }
		}
		name = wc_arthas_story_10_OPT_B
		
		stress_impact = {
			paranoid = minor_stress_impact_gain
			brave = medium_stress_impact_gain
		}
		
		ai_chance = {
			base = 100
			
			stress_impact_ai_chance_modifier = { TRAIT = paranoid STRESS = minor_stress_impact_gain }
			stress_impact_ai_chance_modifier = { TRAIT = brave STRESS = medium_stress_impact_gain }
		}
	}
}
