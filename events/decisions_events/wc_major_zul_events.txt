namespace = zul_restoration

zul_restoration.0001 = {
	type = character_event
	title = zul_restoration.0001.t
	desc = {
		desc = zul_restoration.0001.desc.intro
		# Any Troll
		triggered_desc = {
			trigger = { 
                culture = { has_cultural_pillar = heritage_zulite }  
			}
			desc = zul_restoration.0001.desc.troll
		}
		# Angry People
		triggered_desc = {
			trigger = { 
				has_character_flag = zul_restoration_angry
			}
			desc = zul_restoration.0001.desc.angry
		}
		# Others
		triggered_desc = {
			trigger = { 
				NOT = { culture = { has_cultural_pillar = heritage_zulite } } 
			}
			desc = zul_restoration.0001.desc.neutral
		}
	}
	theme = realm

	immediate = {
		title:e_empire_of_zul.holder = { save_scope_as = scoped_emperor }
		if = {
			limit = { 
				has_character_flag = held_zul_empire 
				NOT = { root = scope:scoped_emperor }
				OR = {
					has_trait = vengeful
					has_trait = wrathful
				}
			}
			remove_character_flag = held_zul_empire
			add_character_flag = zul_restoration_angry
		}
		play_music_cue = "mx_cue_epic_sacral_moment"
	}

	left_portrait = {
		character = scope:scoped_emperor
		animation = personality_honorable
	}

	option = {
		name = {
			# Held a troll empire, but doesn't now (angry)
			trigger = {
				has_character_flag = zul_restoration_angry
			}
			text = zul_restoration.0001.angry
		}
		name = {
			# Trolls/New Emperor
			trigger = {
				culture = {
					has_cultural_pillar = heritage_zulite
				}
				NOT = { has_character_flag = zul_restoration_angry }
			}
			text = zul_restoration.0001.troll
		}
		name = {
			# Others
			trigger = {
				NOT = { 
					culture = {
						has_cultural_pillar = heritage_zulite
					}
				}
			}
			text = zul_restoration.0001.neutral
		}
		scope:scoped_emperor = {
			set_nickname_effect = { NICKNAME = nick_the_glorious }
		}
	}
	
	after = {
		hidden_effect = {
			if = {
				limit = { has_character_flag = zul_restoration_angry }
				remove_character_flag = zul_restoration_angry
			}
		}
	}

}