namespace = horde_invasion

#########################################
#
#	Horde Invasion events - CK3 Edition
#
#########################################

# Setup Blackhand and the associated story
horde_invasion.0001 = {
	type = empty
	hidden = yes

	immediate = {
		debug_log = "The Horde has appeared!"
		debug_log_date = yes
		set_blackhand_character_effect = yes
		scope:blackhand = {
			create_story = story_horde_invasion
			save_scope_as = story_owner
		}
	}
}

# Starts the Horde Invasion
horde_invasion.0002 = {
	type = narrative_event
	title = horde_invasion.0002.title
	desc = horde_invasion.0002.desc
	theme = war
	override_background = {
		reference = wc_background_dark_portal
	}
	left_portrait = {
		character = scope:blackhand
		animation = personality_bold
	}

	immediate = {
		set_global_variable = dark_portal_was_opened
		declare_war_on_stormwind_effect = yes
	}

	option = {
		trigger = { character = scope:blackhand }
		name = horde_invasion.0002.a
	}

	option = { # Corrupted orcs option
		trigger = {
			NOT = { 
				character = scope:blackhand 
				religion = orcish_shamanism
			}
			religion = orcish_fel
		}
		name = horde_invasion.0002.b
	}

	option = { # Frostwolf option
		trigger = {
			NOT = { 
				character = scope:blackhand 
				religion = orcish_fel
			}
			religion = orcish_shamanism
		}
		name = horde_invasion.0002.c
	}
	
	option = { # Outsider option
		trigger = {
			NOT = { 
				character = scope:blackhand
				religion = orcish_shamanism
				religion = orcish_fel
			}
		}
		name = horde_invasion.0002.d
	}
}