namespace = WCCSC

#########################################
#
#	Horde Invasion events - CK3 Edition
#
#########################################

# Spawns the Scourge, Ner'zhul and its dreadlords
WCCSC.1 = {
	type = empty
	hidden = yes

	immediate = {
		create_character = {
			save_scope_as =  nerzhul
			location = title:c_icecrown.title_province
			template = lich_nerzhul_character_template
			
			name = "Ner'zhul"
		}
		scope:nerzhul = {
			create_story = story_scourge_invasion
		}
	}
}
# Delayed army spawn
WCCSC.2 = {
	type = character_event
	hidden = yes

	immediate = {
		scourge_start_pack_effect = yes
		
		create_character = {
			employer = scope:nerzhul
			template = tichondrius_character_template
			
			name = "Tichondrius"
			
			after_creation = {
				scope:story = { add_to_variable_list = { name = nerzhul_jailors target = prev } }
			}
		}
		create_character = {
			employer = scope:nerzhul
			template = varimathras_character_template
			
			name = "Varimathras"
			
			after_creation = {
				scope:story = { add_to_variable_list = { name = nerzhul_jailors target = prev } }
			}
		}
		create_character = {
			employer = scope:nerzhul
			template = mephistroth_character_template
			
			name = "Mephistroth"
			
			after_creation = {
				scope:story = { add_to_variable_list = { name = nerzhul_jailors target = prev } }
			}
		}
		create_character = {
			employer = scope:nerzhul
			template = anetheron_character_template
			
			name = "Anetheron"
			
			after_creation = {
				scope:story = { add_to_variable_list = { name = nerzhul_jailors target = prev } }
			}
		}
		create_character = {
			employer = scope:nerzhul
			template = balnazzar_character_template
			
			name = "Balnazzar"
			
			after_creation = {
				scope:story = { add_to_variable_list = { name = nerzhul_jailors target = prev } }
			}
		}
		create_character = {
			employer = scope:nerzhul
			template = detheroc_character_template
			
			name = "Detheroc"
			
			after_creation = {
				scope:story = { add_to_variable_list = { name = nerzhul_jailors target = prev } }
			}
		}
	}
}
# Notification: the Scourge appears
WCCSC.5 = {
	type = character_event
	title = WCCSC_5_TITLE
	desc = WCCSC_5_DESC
	theme = war
	override_background = {
		reference = wc_background_northrend
	}
	left_portrait = {
		character = scope:nerzhul
		animation = personality_bold
	}

	option = {
		name = {
			text = {
				first_valid = {
					# All are equal in death
					triggered_desc = {
						trigger = { faith = faith:orcish_fel }
						desc = WCCSC_5_OPT_A_death
					}
					# Better serve the Legion well, Ner'zhul
					triggered_desc = {
						trigger = { faith = faith:orcish_fel }
						desc = WCCSC_5_OPT_A_legion
					}
					# Death comes into play
					triggered_desc = { # Corrupted orcs option
						trigger = { faith = faith:orcish_fel }
						desc = WCCSC_5_OPT_A_evil
					}
					# God save us all!
					desc = WCCSC_5_OPT_A_neutral
				}
			}
		}
	}
}

# Dreadlord jailers comes to finish you
WCCSC.15 = {
	type = character_event
	title = WCCSC_15_TITLE
	desc = WCCSC_15_DESC
	theme = war
	override_background = {
		reference = wc_background_northrend
	}
	left_portrait = {
		character = root
		animation = pain
	}
	right_portrait = {
		character = scope:scourge_jailer
		animation = rage
	}
	
	immediate = {
		find_scourge_jailer_and_save_to_scope_effect = yes
	}

	option = {
		name = WCCSC_15_OPT_A
		
		death = { death_reason = death_execution killer = scope:scourge_jailer }
	}
}