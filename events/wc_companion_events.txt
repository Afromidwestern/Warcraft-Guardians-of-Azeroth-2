namespace = companion

####################
# Beginning Events #
####################
companion.0001 = {  #Animal Companion
	type = character_event
	title = companion.0001.t
	desc = companion.0001.desc

	theme = hunt_activity
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = companion.0001.raven

		save_scope_value_as = {
			name = companion_species
			value = flag:raven
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.bear

		save_scope_value_as = {
			name = companion_species
			value = flag:bear
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.wolf

		save_scope_value_as = {
			name = companion_species
			value = flag:wolf
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.boar

		save_scope_value_as = {
			name = companion_species
			value = flag:boar
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.scorpion

		save_scope_value_as = {
			name = companion_species
			value = flag:scorpion
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.fox

		save_scope_value_as = {
			name = companion_species
			value = flag:fox
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.bat

		save_scope_value_as = {
			name = companion_species
			value = flag:bat
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.frostsaber

		save_scope_value_as = {
			name = companion_species
			value = flag:frostsaber
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.crab

		save_scope_value_as = {
			name = companion_species
			value = flag:crab
		}
		trigger_event = companion.1001
	}

	option = {
		name = companion.0001.quit
	}
}

######################
# Taming Challenge 1 #
######################
companion.1001 = { #All
	type = character_event
	title = companion.1001.t
	desc = companion.1001.desc

	theme = hunt_activity
	left_portrait = {
		character = root
		animation = scheme #Don't know what animation to put here
	}

	option = {
		name = companion.1001.challenge

		duel = {
			skill = intrigue
			value = decent_skill_rating

			33 = {
				desc = companion.1001.challenge.great
				compare_modifier = {
					value = scope:duel_value
					multiplier = 6
				}
				
				show_as_tooltip = {
					if = { #To effect
						limit = { scope:companion_species = flag:raven }
						add_character_modifier = raven_companion
					}

					if = {
						limit = { scope:companion_species = flag:bear }
						add_character_modifier = bear_companion
					}

					if = {
						limit = { scope:companion_species = flag:wolf }
						add_character_modifier = wolf_companion
					}

					if = {
						limit = { scope:companion_species = flag:boar }
						add_character_modifier = boar_companion
					}

					if = {
						limit = { scope:companion_species = flag:scorpion }
						add_character_modifier = scorpion_companion
					}

					if = {
						limit = { scope:companion_species = flag:fox }
						add_character_modifier = fox_companion
					}

					if = {
						limit = { scope:companion_species = flag:bat }
						add_character_modifier = bat_companion
					}

					if = {
						limit = { scope:companion_species = flag:frostsaber }
						add_character_modifier = frostsaber_companion
					}

					if = {
						limit = { scope:companion_species = flag:crab }
						add_character_modifier = crab_companion
					}
				}

				if = { #Change 4001 and then remove this mess
					limit = { scope:companion_species = flag:raven }
					trigger_event = companion.4001
				}

				if = {
					limit = { scope:companion_species = flag:bear }
					trigger_event = companion.4002
				}

				if = {
					limit = { scope:companion_species = flag:wolf }
					trigger_event = companion.4003
				}

				if = {
					limit = { scope:companion_species = flag:boar }
					trigger_event = companion.4004
				}

				if = {
					limit = { scope:companion_species = flag:scorpion }
					trigger_event = companion.4005
				}

				if = {
					limit = { scope:companion_species = flag:fox }
					trigger_event = companion.4006
				}

				if = {
					limit = { scope:companion_species = flag:bat }
					trigger_event = companion.4007
				}

				if = {
					limit = { scope:companion_species = flag:frostsaber }
					trigger_event = companion.4008
				}

				if = {
					limit = { scope:companion_species = flag:crab }
					trigger_event = companion.4009
				}
			}

			33 = {
				desc = companion.1001.challenge.good
				compare_modifier = {
					value = scope:duel_value
					multiplier = 4
				}
				
				show_as_tooltip = {
					#Show that you have a second chance somehow. Probably use an effect.
				}

				trigger_event = companion.2001
			}

			33 = {
				desc = companion.1001.challenge.fail
				compare_modifier = {
					value = scope:duel_value
					multiplier = -5
				}

				show_as_tooltip = {
					#Show that you have failed somehow. Probably use an effect.
				}

				trigger_event = companion.5001
			}
		}
	}

	option = {
		name = companion.0001.quit
	}
}

######################
# Taming Challenge 2 #
######################
companion.2001 = { #All
	type = character_event
	title = companion.2001.t
	desc = companion.2001.desc

	theme = hunt_activity
	left_portrait = {
		character = root
		animation = scheme #Don't know what animation to put here
	}

	option = {
		name = companion.2001.challenge

		duel = {
			skill = prowess
			value = average_skill_rating

			50 = {
				desc = companion.2001.challenge.succeed
				compare_modifier = {
					value = scope:duel_value
					multiplier = 5
				}

				show_as_tooltip = {
					if = { #To effect
						limit = { scope:companion_species = flag:raven }
						add_character_modifier = raven_companion
					}

					if = {
						limit = { scope:companion_species = flag:bear }
						add_character_modifier = bear_companion
					}

					if = {
						limit = { scope:companion_species = flag:wolf }
						add_character_modifier = wolf_companion
					}

					if = {
						limit = { scope:companion_species = flag:boar }
						add_character_modifier = boar_companion
					}

					if = {
						limit = { scope:companion_species = flag:scorpion }
						add_character_modifier = scorpion_companion
					}

					if = {
						limit = { scope:companion_species = flag:fox }
						add_character_modifier = fox_companion
					}

					if = {
						limit = { scope:companion_species = flag:bat }
						add_character_modifier = bat_companion
					}

					if = {
						limit = { scope:companion_species = flag:frostsaber }
						add_character_modifier = frostsaber_companion
					}

					if = {
						limit = { scope:companion_species = flag:crab }
						add_character_modifier = crab_companion
					}
				}

				if = { #Change 4001 and then remove this mess
					limit = { scope:companion_species = flag:raven }
					trigger_event = companion.4001
				}

				if = {
					limit = { scope:companion_species = flag:bear }
					trigger_event = companion.4002
				}

				if = {
					limit = { scope:companion_species = flag:wolf }
					trigger_event = companion.4003
				}

				if = {
					limit = { scope:companion_species = flag:boar }
					trigger_event = companion.4004
				}

				if = {
					limit = { scope:companion_species = flag:scorpion }
					trigger_event = companion.4005
				}

				if = {
					limit = { scope:companion_species = flag:fox }
					trigger_event = companion.4006
				}

				if = {
					limit = { scope:companion_species = flag:bat }
					trigger_event = companion.4007
				}

				if = {
					limit = { scope:companion_species = flag:frostsaber }
					trigger_event = companion.4008
				}

				if = {
					limit = { scope:companion_species = flag:crab }
					trigger_event = companion.4009
				}
			}

			50 = {
				desc = companion.2001.challenge.fail
				compare_modifier = {
					value = scope:duel_value
					multiplier = -5
				}

				trigger_event = companion.5001
			}
		}
	}

	option = {
		name = companion.0001.quit
	}
}

###########
# Success #
###########
companion.4001 = { #Raven
	type = character_event
	title = companion.4001.t
	desc = companion.4001.desc

	theme = hunt_activity
	left_portrait = {
		character = root
		animation = scheme #Don't know what animation to put here
	}

	option = {
		name = companion.4001.quit

		add_character_modifier = raven_companion
		start_companion_story_cycle_effect = yes
	}
}

###########
# Failure #
###########
companion.5001 = { #All
	type = character_event
	title = companion.5001.t
	desc = companion.5001.desc

	theme = hunt_activity
	left_portrait = {
		character = root
		animation = scheme #Don't know what animation to put here
	}

	option = {
		name = companion.5001.quit

		#Maybe lower the cooldown of the decision here?
	}
}