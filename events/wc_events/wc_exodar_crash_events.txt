namespace = exodar

#Message for diplomatic contacts
exodar.1001 = {
	title = exodar.1001.name
	desc = exodar.1001.desc
	theme = realm
	override_background = throne_room
	
	left_portrait = {
 		character = root
		animation = worry
	}

	right_portrait = {
 		character = scope:marshal
		animation = personality_honorable
	}

	immediate = {
		if = {
			limit = { exists = cp:councillor_marshal }
			cp:councillor_marshal = {
				save_scope_as = marshal
			}
		}
		else = {
			random_courtier = {
				limit = { is_available_adult = yes }
				save_scope_as = marshal
			}
		}
	}

	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = { religion = { is_in_family = rf_disorder } }
						desc = exodar.1001.a
					}
					triggered_desc = {	
						trigger = {  religion = { is_in_family = rf_light } }
						desc = exodar.1001.b
					}
					#One of the elves that fought Archimonde?
					triggered_desc = {
						trigger = {
							OR = {
								culture = { has_cultural_pillar = heritage_darnassian }
								culture = { has_cultural_pillar = heritage_highborne }
								culture = { has_cultural_pillar = heritage_draconic }
								culture = { has_cultural_pillar = heritage_cenaric }
							}
						}
						desc = exodar.1001.c
					}
					desc = exodar.1001.d
				}
			}
		}
		stress_impact = { paranoid = minor_stress_impact_gain }
	}

	option = { 
		name = { 
			text = { 
				desc = exodar.1001.e
			}
		}
		show_as_tooltip = {
			scope:actor = {
				custom_tooltip = exodar.1001.e.tooltip
			}
		}
		trigger_event = exodar.1009
	}
}

#Message for non-diplomatic contacts
exodar.1002 = {
	title = exodar.1002.name
	desc = exodar.1002.desc
	theme = realm
	override_background = throne_room
	
	left_portrait = {
 		character = root
		animation = worry
	}

	right_portrait = {
 		character = scope:marshal
		animation = personality_honorable
	}

	immediate = {
		if = {
			limit = { exists = cp:councillor_marshal }
			cp:councillor_marshal = {
				save_scope_as = marshal
			}
		}
		else = {
			random_courtier = {
				limit = { is_available_adult = yes }
				save_scope_as = marshal
			}
		}
	}

	option = {
		name = {
			trigger = { religion = { is_in_family = rf_disorder } }
			text = exodar.1002.a
		}
		name = {
			trigger = { NOT = { religion = { is_in_family = rf_disorder } } }
			text = exodar.1002.b
		}
	}
}

#Warning event for player
exodar.1003 = {
	title = exodar.1003.name
	desc = exodar.1003.desc
	theme = realm
	override_background = throne_room
	
	left_portrait = {
 		character = root
		animation = personality_honorable
	}

	right_portrait = {
 		character = scope:shaman
		animation = worry
	}

	immediate = {
		create_character = {
			template = witchy_template
			location = root.location
			culture = root.location.culture
			faith = root.location.faith
			age = { 40 70 }
			save_scope_as = shaman
		}
	}

	option = {
		name = exodar.1003.a
		stress_impact = { paranoid = major_stress_impact_gain }
	}
}

#Trigger Warning Event
exodar.1004 = {
	hidden = yes
	immediate = {
		if = {
			limit = {
				any_county_in_region = {
					region = world_kalimdor_north_veiled_isles
					holder = root
				}
			}
			trigger_event = exodar.1003
		}
	}
}

#Spawn Maraad's Army
exodar.1005 = {
	hidden = yes
	immediate = {
		change_government = feudal_government
		spawn_army = {
			levies = 500
			inheritable = yes
			location = root.location
			name = exodar_forces
		}
		spawn_army = {
			men_at_arms = {
				type = anchorite
				stacks = 2
			}
			inheritable = yes
			uses_supply = no
			location = root.location
			name = exodar_forces
		}
		spawn_army = {
			men_at_arms = {
				type = peacekeeper
				stacks = 1
			}
			inheritable = yes
			uses_supply = no
			location = root.location
			name = exodar_forces
		}
	}
}

#Spawn Ishanah's Army
exodar.1006 = {
	hidden = yes
	immediate = {
		spawn_army = {
			levies = 300
			inheritable = yes
			location = root.location
			name = piston_forces
		}
		spawn_army = {
			men_at_arms = {
				type = anchorite
				stacks = 2
			}
			inheritable = yes
			uses_supply = no
			location = root.location
			name = piston_forces
		}
		spawn_army = {
			men_at_arms = {
				type = peacekeeper
				stacks = 2
			}
			inheritable = yes
			uses_supply = no
			location = root.location
			name = piston_forces
		}
	}
}

#Spawn Admetius's Army
exodar.1007 = {
	hidden = yes
	immediate = {
		spawn_army = {
			levies = 300
			inheritable = yes
			location = root.location
			name = warp_forces
		}
		spawn_army = {
			men_at_arms = {
				type = rangari
				stacks = 1
			}
			inheritable = yes
			uses_supply = no
			location = root.location
			name = warp_forces
		}
	}
}

#Spawn Proenitus's Army
exodar.1008 = {
	hidden = yes
	immediate = {
		spawn_army = {
			levies = 300
			inheritable = yes
			location = root.location
			name = azure_forces
		}
		spawn_army = {
			men_at_arms = {
				type = peacekeeper
				stacks = 2
			}
			inheritable = yes
			uses_supply = no
			location = root.location
			name = azure_forces
		}
	}
}

exodar.1009 = { 
	title = exodar.1004.name
	desc = exodar.1004.desc
	theme = realm
	override_background = throne_room

	right_portrait = {
		character = scope:velen 
		animation = zeal
	}
	left_portrait = {
		character = scope:maraad
		animation = personality_honorable
	}
	lower_left_portrait = {
		character = scope:proenitus
		animation = steward
	}
	lower_center_portrait = {
		character = scope:ishanah
		animation = chaplain
	}
	lower_right_portrait = {
		character = scope:admetius
		animation = marshall
	}

	option = { 
		name = exodar.1004.a
		set_player_character = scope:maraad
	}

	option = { 
		name = exodar.1004.b
		set_player_character = scope:proenitus
	}

	option = { 
		name = exodar.1004.c
		set_player_character = scope:admetius
	}

	option = { 
		name = exodar.1004.d
		set_player_character = scope:ishanah
	}

	option = { 
		name = exodar.1004.e
		#nothing happens
		show_as_tooltip = {
			custom_tooltip = exodar.1004.e.tooltip
		}
	}
}