namespace = lordaeron 

lodaeron.1001 = { 

	type = character_event
	title = lordaeron.1001.title
	desc = lordaeron.1001.desc
	theme = stewardship
	override_background = throne_room

	right_portrait = { 
		character = root
		animation = throne_room_ruler
	}

	immediate = { 
		title:b_lordaeron.title_province = { 
			remove_building = ruined_palace_01
			add_special_building = ruined_palace_02 
		}
		title:c_lordaeron.set_county_culture = { 
			culture = forsaken
		}
		random_vassal_or_below = { 
			limit = { 
				faith.is_in_family = rf_shadow
				NOT = { faith = selinite_cult }
				NOT = { piety_level >= 2 }
				NOR = { has_trait = zealous has_trait = loyal has_trait = holy_warrior has_trait = cynical }
			}
			set_faith = selinite_cult
			random_held_title = { 
				set_county_faith = { faith = selinite_cult }
			}
			save_scope_as = selinite_1
		}
		random_vassal_or_below = { 
			limit = { 
				faith.is_in_family = rf_shadow
				NOT = { faith = selinite_cult }
				NOT = { piety_level >= 2 }
				NOR = { has_trait = zealous has_trait = loyal has_trait = holy_warrior has_trait = cynical }
			}
			set_faith = selinite_cult
			if = { 
				limit = { government_is_}
			}
			random_held_title = { 
				set_county_faith = { faith = selinite_cult }
			}
			save_scope_as = selinite_2
		}
		random_vassal_or_below = { 
			limit = { 
				faith.is_in_family = rf_shadow
				NOT = { faith = selinite_cult }
				NOT = { piety_level >= 2 }
				NOR = { has_trait = zealous has_trait = loyal has_trait = holy_warrior has_trait = cynical }
			}
			random_held_title = { 
				set_county_faith = { faith = selinite_cult }
			}
			set_faith = selinite_cult
		}
	}

	trigger = { 
		OR = { 
			AND = { 
				root.culture = forsaken
				
			}
			title:b_lordaeron.province_owner.top_liege.culture = forsaken
			title:b_lordaeron.province_owner.culture = forsaken
			title:b_lordaeron.province_owner.top_liege.culture.any_parent_culture = { 
				count >= 1
				culture = forsaken
			}
			title:b_lordaeron.province_owner.culture.any_parent_culture = { 
				count >= 1
				culture = forsaken
			}
		}
	}

	on_trigger_fail = { 
		# handle this 
	}

	option = { 
		# retain sylvanas cult of personality - AI chance 75
		desc = lordaeron.1001.opt.a
		title:c_lordaeron.set_county_faith = { 
			faith = forsaken_cult
		}
	}

	option = { 
		# convert and delegate religious authority to cult of forgotten shadow - AI chance 20
		desc = lordaeron.1001.opt.b
		title:c_lordaeron.set_county_faith = { 
			faith = selinite_cult
		}
		every_vassal_or_below = { 
			faith = selinite_cult
		}
	}

	option = { 
		# retain cult of personality but grant religious freedom to selinites - AI chance 5
		desc = lordaeron.1001.opt.c
		#vassal_contract_set_obligation_level = { type = religious_rights level = 1 }
		random_list = { 
			55 = { 
				modifier = { add = 5 root = { has_trait = zealous} }
				modifier = { add = 5 root = { piety_level >= 2 } }
				modifier = { add = 5 root = { piety_level >= 3 } }
				modifier = { add = 5 root = { piety_level >= 4 } }
				modifier = { add = 10 root = { dread > 20 } }
				modifier = { add = 15 root = { dread > 40 } }
				title:c_lordaeron.set_county_faith = { 
					faith = forsaken_cult
				}
			}
			45 = { 
				title:c_lordaeron.set_county_faith = { 
					faith = selinite_cult
				}
			}

		}
	}
}