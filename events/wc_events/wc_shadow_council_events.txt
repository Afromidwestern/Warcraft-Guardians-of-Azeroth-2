namespace = shadow_council

#############################################
# Shadow Council events						#
# by ElMariuso								#
#############################################
shadow_council.0010 = {
	type = character_event
	title = shadow_council.0010.t
	desc = {
		desc = shadow_council.0010.d
	}
	
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_burning_steppes
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = personality_bold
	}
	
	immediate = {
		# Grab actors.
		## Root initially.
		save_scope_as = ntd_shadow_council_holder
		### Save all others scopes
		title:c_blackrock_spire.holder = {
			save_scope_as = ntd_blackrock_holder
		}
		title:d_twilights_hammer.holder = {
			save_scope_as = ntd_twilights_hammer_holder
		}
		title:e_horde.holder = {
			save_scope_as = ntd_e_horde_holder
		}
	}
	
	# The Twilight Hammer or the inhabitants of this lands are close to the Old Gods.
	option = {
		name = LETS_GO
		custom_tooltip = shadow_council.0010.tt
		exclusive = yes
		
		trigger = {
			title:d_twilights_hammer.holder.liege = root
			OR =
			{
				title:c_blackrock_spire.holder.religion = religion:shathgral
				title:c_blackrock_spire.holder.religion = religion:fire_group
				title:c_blackrock_spire.holder.religion = religion:air_group
			}
		}
		
		scope:ntd_shadow_council_holder = {
			trigger_event = {
				id = shadow_council.0011
				days = 20
			}
		}
		scope:ntd_twilights_hammer_holder = {
			trigger_event = {
				id = shadow_council.0011
				days = 20
			}
		}
		scope:ntd_blackrock_holder = {
			trigger_event = {
				id = shadow_council.0011
				days = 20
			}
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	
	# It's time to invade this land.
	option = {
		name = LETS_GO
		
		custom_tooltip = shadow_council.0010.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
}

### Twilights Hammer branch ###
shadow_council.0011 = {
	type = character_event
	title = shadow_council.0011.t
	desc = {
		desc = shadow_council.0011.d
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = personality_bold
	}
	
	# We're here (Gul'dan option).
	option = {
		name = shadow_council.0011.a
		custom_tooltip = shadow_council.0011.a.tt
		
		trigger = {
			any_held_title = { this = title:k_shadow_council }
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	
	# We're here (Cho'gall option).
	option = {
		name = shadow_council.0011.b
		custom_tooltip = shadow_council.0011.b.tt
		
		trigger = {
			any_held_title = { this = title:d_twilights_hammer }
		}
		
		scope:ntd_twilights_hammer_holder = {
			trigger_event = {
				id = shadow_council.0012
				days = 2
			}
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	
	# We're here (Dark Iron option).
	option = {
		name = shadow_council.0011.c
		custom_tooltip = shadow_council.0011.c.tt
		
		trigger = {
			any_held_title = { this = title:c_blackrock_spire }
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
}

# Being the mediator ?
shadow_council.0012 = {
	type = character_event
	title = shadow_council.0012.t
	desc = {
		desc = shadow_council.0012.d
	}
	theme = war
	override_background = {
		reference = wc_background_blackrock_mountain_center
	}
	left_portrait = {
		character = scope:ntd_twilights_hammer_holder
		animation = personality_rational
	}
	
	# Accepting
	option = {
		name = shadow_council.0012.a
		custom_tooltip = shadow_council.0012.a.tt
		
		add_piety_level = -1
		scope:ntd_shadow_council_holder = {
			trigger_event = {
				id = shadow_council.0013
				days = 2
			}
		}
		show_as_tooltip = { taking_the_blackrock_mountain_each_way_effect = yes }
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 90
		}
	}
	
	# It's a bad idea
	option = {
		name = shadow_council.0012.b
		custom_tooltip = shadow_council.0012.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 10
		}
	}
}

# Cho'gall volunteered as a mediator
shadow_council.0013 = {
	type = character_event
	title = shadow_council.0013.t
	desc = {
		desc = shadow_council.0013.d
	}
	theme = diplomacy
	override_background = {
		reference = wc_background_blackrock_mountain_center
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = personality_rational
	}
	right_portrait = {
		character = scope:ntd_twilights_hammer_holder
		animation = scheme
	}
	
	# Accept
	option = {
		name = shadow_council.0013.a
		custom_tooltip = shadow_council.0013.a.tt
		
		scope:ntd_blackrock_holder = {
			trigger_event = {
				id = shadow_council.0014
				days = 10
			}
		}
		show_as_tooltip = { taking_the_blackrock_mountain_each_way_effect = yes }
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 90
		}
	}
	
	# Refuse
	option = {
		name = shadow_council.0013.b
		custom_tooltip = shadow_council.0013.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 10
		}
	}
}

scripted_effect shadow_council.0014_notify_other_players_effect = {
	every_player = {
		limit = {
			NOR = {
				this = scope:ntd_blackrock_holder
				this = scope:ntd_shadow_council_holder
				this = scope:ntd_twilights_hammer_holder
			}
			any_sub_realm_county = {
				OR = {
					title_province = { geographical_region = world_eastern_kingdoms_khaz_modan_badlands }
					title_province = { geographical_region = world_eastern_kingdoms_khaz_modan_searing_gorge }
					title_province = { geographical_region = world_eastern_kingdoms_azeroth_redridge_mountains }
				}
			}
		}
		trigger_event = shadow_council.0015
	}
}

scripted_effect shadow_council.0014_notify_shadow_council_effect = {
	every_player = {
		limit = {
			NOT ={
				this = scope:ntd_twilights_hammer_holder
			}
			OR = {
				this = scope:ntd_shadow_council_holder
				any_liege_or_above = {
					this = scope:ntd_shadow_council_holder
				}
			}
		}
		trigger_event = shadow_council.0016
	}
}

scripted_effect shadow_council.0014_notify_twilights_hammer_effect = {
	limit = {
		this = scope:ntd_twilights_hammer_holder
	}
	trigger_event = shadow_council.0017
}

# Orcs propose something
shadow_council.0014 = {
	type = character_event
	title = shadow_council.0014.t
	desc = {
		desc = shadow_council.0014.d
	}
	theme = war
	override_background = {
		reference = wc_background_blackrock_mountain_center
	}
	left_portrait = {
		character = scope:ntd_blackrock_holder
		animation = disapproval
	}
	right_portrait = {
		character = scope:ntd_twilights_hammer_holder
		animation = scheme
	}
	
	# Accept
	option = {
		name = shadow_council.0014.a
		custom_tooltip = shadow_council.0014.a.tt
		
		# Trigger Shadow Council players
		shadow_council.0014_notify_shadow_council_effect = yes
		# Trigger Twilight Council player
		shadow_council.0014_notify_twilights_hammer_effect = yes
		# And inform other players.
		shadow_council.0014_notify_other_players_effect = yes
		# Then apply effects.
		taking_the_blackrock_mountain_accept_effect = yes
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	
	# Refuse
	option = {
		name = shadow_council.0014.b
		custom_tooltip = shadow_council.0014.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 0
		}
	}
}

# The Answer: Others POV
shadow_council.0015 = {
	type = character_event
	title = shadow_council.0015.t
	desc = {
		desc = shadow_council.0015.d
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = scheme
	}
	right_portrait = {
		character = scope:ntd_blackrock_holder
		animation = disapproval
	}
	
	immediate = {
		play_music_cue = "mx_cue_peace_ensues"
	}
	
	# Okay
	option = {
		name = shadow_council.0015.a
		custom_tooltip = shadow_council.0015.a.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
}

# The Answer: Shadow Council POV
shadow_council.0016 = {
	type = character_event
	title = shadow_council.0016.t
	desc = {
		desc = shadow_council.0016.d
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = scheme
	}
	right_portrait = {
		character = scope:ntd_blackrock_holder
		animation = disapproval
	}
	
	immediate = {
		play_music_cue = "mx_cue_peace_ensues"
	}
	
	# Okay
	option = {
		name = shadow_council.0016.a
		custom_tooltip = shadow_council.0016.a.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
}

# The Answer: Twilights Hammer POV
shadow_council.0017  = {
	type = character_event
	title = shadow_council.0017.t
	desc = {
		desc = shadow_council.0017.d
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = scheme
	}
	right_portrait = {
		character = scope:ntd_blackrock_holder
		animation = disapproval
	}
	
	immediate = {
		play_music_cue = "mx_cue_peace_ensues"
	}
	
	# We need more lands
	option = {
		name = shadow_council.0017.a
		custom_tooltip = shadow_council.0017.a.tt
		
		scope:ntd_shadow_council_holder = {
			trigger_event = {
				id = shadow_council.0018
				days = 10
			}
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	# Okay fine
	option = {
		name = shadow_council.0017.b
		custom_tooltip = shadow_council.0017.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 0
		}
	}
}

# Cho’gall ask for lands as a reward of the good negotiations.
shadow_council.0018  = {
	type = character_event
	title = shadow_council.0018.t
	desc = {
		desc = shadow_council.0018.d
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain_center
	}
	left_portrait = {
		character = scope:ntd_twilights_hammer_holder
		animation = admiration
	}
	right_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = personality_rational
	}
	
	# Seize more lands
	option = {
		name = shadow_council.0018.a
		custom_tooltip = shadow_council.0018.a.tt
		
		# Apply effects.
		more_blackrock_mountain_accept_effect = yes
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 90
		}
	}
	# Giving burning steppes
	option = {
		name = shadow_council.0018.b
		custom_tooltip = shadow_council.0018.b.tt
		
		# Apply effects.
		give_burning_steppes_accept_effect = yes
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 10
		}
	}
	# Not for you
	option = {
		name = shadow_council.0018.c
		custom_tooltip = shadow_council.0018.c.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 0
		}
	}
}

### Invade this land ###