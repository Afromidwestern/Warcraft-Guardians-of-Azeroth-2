namespace = shadow_council

#############################################
# Shadow Council events						#
# by ElMariuso								#
#############################################
shadow_council.0010 = {
	type = character_event
	title = shadow_council.0010.t
	desc = {
		desc = shadow_council.0010.d
	}
	
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_burning_steppes
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = personality_bold
	}
	
	immediate = {		
		### Save all scopes
		title:c_blackrock_spire.holder = {
			save_scope_as = ntd_blackrock_holder
		}
		title:k_shadow_council.holder = {
			save_scope_as = ntd_shadow_council_holder
		}
		title:d_twilights_hammer.holder = {
			save_scope_as = ntd_twilights_hammer_holder
		}
		title:e_horde.holder = {
			save_scope_as = ntd_e_horde_holder
		}
	}
	
	# The Twilight Hammer or the inhabitants of this lands are close to the Old Gods.
	option = {
		name = LETS_GO
		custom_tooltip = shadow_council.0010.tt
		exclusive = yes
		
		trigger = {
			title:d_twilights_hammer.holder.liege = root
			OR =
			{
				title:c_blackrock_spire.holder.religion = religion:shatgral
				title:c_blackrock_spire.holder.religion = religion:fire_group
				title:c_blackrock_spire.holder.religion = religion:air_group
			}
		}
		
		scope:ntd_shadow_council_holder = {
			trigger_event = {
				id = WCSC.2
				days = 20
			}
		}
		scope:ntd_twilights_hammer_holder = {
			trigger_event = {
				id = WCSC.2
				days = 20
			}
		}
		scope:ntd_blackrock_holder = {
			trigger_event = {
				id = WCSC.2
				days = 20
			}
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	
	# It's time to invade this land.
	option = {
		name = LETS_GO
		
		custom_tooltip = shadow_council.1.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
}

### Twilights Hammer branch ###
WCSC.2 = {
	type = character_event
	title = WCSC_2_TITLE
	desc = {
		desc = WCSC_2_DESC
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = personality_bold
	}
	
	# We're here (Gul'dan option).
	option = {
		name = WCSC_2.a
		custom_tooltip = WCSC_2.a.tt
		
		trigger = {
			any_held_title = { this = title:k_shadow_council }
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	
	# We're here (Cho'gall option).
	option = {
		name = WCSC_2.b
		custom_tooltip = WCSC_2.b.tt
		
		trigger = {
			any_held_title = { this = title:d_twilights_hammer }
		}
		
		scope:ntd_twilights_hammer_holder = {
			trigger_event = {
				id = WCSC.3
				days = 2
			}
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	
	# We're here (Dark Iron option).
	option = {
		name = WCSC_2.c
		custom_tooltip = WCSC_2.c.tt
		
		trigger = {
			any_held_title = { this = title:c_blackrock_spire }
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
}

# Being the mediator ?
WCSC.3 = {
	type = character_event
	title = WCSC_3_TITLE
	desc = {
		desc = WCSC_3_DESC
	}
	theme = war
	override_background = {
		reference = wc_background_blackrock_mountain_center
	}
	left_portrait = {
		character = scope:ntd_twilights_hammer_holder
		animation = personality_rational
	}
	
	# Accepting
	option = {
		name = WCSC_3.a
		custom_tooltip = WCSC_3.a.tt
		
		add_piety_level = -1
		scope:ntd_shadow_council_holder = {
			trigger_event = {
				id = WCSC.4
				days = 2
			}
		}
		show_as_tooltip = { taking_the_blackrock_mountain_each_way_effect = yes }
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 90
		}
	}
	
	# It's a bad idea
	option = {
		name = WCSC_3.b
		custom_tooltip = WCSC_3.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 10
		}
	}
}

# Cho'gall volunteered as a mediator
WCSC.4 = {
	type = character_event
	title = WCSC_4_TITLE
	desc = {
		desc = WCSC_4_DESC
	}
	theme = diplomacy
	override_background = {
		reference = wc_background_blackrock_mountain_center
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = personality_rational
	}
	right_portrait = {
		character = scope:ntd_twilights_hammer_holder
		animation = scheme
	}
	
	# Accept
	option = {
		name = WCSC_4.a
		custom_tooltip = WCSC_4.a.tt
		
		scope:ntd_blackrock_holder = {
			trigger_event = {
				id = WCSC.5
				days = 10
			}
		}
		show_as_tooltip = { taking_the_blackrock_mountain_each_way_effect = yes }
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 90
		}
	}
	
	# Refuse
	option = {
		name = WCSC_4.b
		custom_tooltip = WCSC_4.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 10
		}
	}
}

scripted_effect WCSC_5_notify_other_players_effect = {
	every_player = {
		limit = {
			NOR = {
				this = scope:ntd_blackrock_holder
				this = scope:ntd_shadow_council_holder
				this = scope:ntd_twilights_hammer_holder
			}
			any_sub_realm_county = {
				OR = {
					title_province = { geographical_region = world_eastern_kingdoms_khaz_modan_badlands }
					title_province = { geographical_region = world_eastern_kingdoms_khaz_modan_searing_gorge }
					title_province = { geographical_region = world_eastern_kingdoms_azeroth_redridge_mountains }
				}
			}
		}
		trigger_event = WCSC.6
	}
}

scripted_effect WCSC_5_notify_shadow_council_effect = {
	every_player = {
		limit = {
			NOT ={
				this = scope:ntd_twilights_hammer_holder
			}
			OR = {
				this = scope:ntd_shadow_council_holder
				any_liege_or_above = {
					this = scope:ntd_shadow_council_holder
				}
			}
		}
		trigger_event = WCSC.7
	}
}

scripted_effect WCSC_5_notify_twilights_hammer_effect = {
	limit = {
		this = scope:ntd_twilights_hammer_holder
	}
	trigger_event = WCSC.8
}

# Orcs propose something
WCSC.5 = {
	type = character_event
	title = WCSC_5_TITLE
	desc = {
		desc = WCSC_5_DESC
	}
	theme = war
	override_background = {
		reference = wc_background_blackrock_mountain_center
	}
	left_portrait = {
		character = scope:ntd_blackrock_holder
		animation = disapproval
	}
	right_portrait = {
		character = scope:ntd_twilights_hammer_holder
		animation = scheme
	}
	
	# Accept
	option = {
		name = WCSC_5.a
		custom_tooltip = WCSC_5.a.tt
		
		# Trigger Shadow Council players
		WCSC_5_notify_shadow_council_effect = yes
		# Trigger Twilight Council player
		WCSC_5_notify_twilights_hammer_effect = yes
		# And inform other players.
		WCSC_5_notify_other_players_effect = yes
		# Then apply effects.
		taking_the_blackrock_mountain_accept_effect = yes
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	
	# Refuse
	option = {
		name = WCSC_5.b
		custom_tooltip = WCSC_5.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 0
		}
	}
}

# The Answer: Others POV
WCSC.6 = {
	type = character_event
	title = WCSC_6_TITLE
	desc = {
		desc = WCSC_6_DESC
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = scheme
	}
	right_portrait = {
		character = scope:ntd_blackrock_holder
		animation = disapproval
	}
	
	immediate = {
		play_music_cue = "mx_cue_peace_ensues"
	}
	
	# Okay
	option = {
		name = WCSC_6.a
		custom_tooltip = WCSC_6.a.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
}

# The Answer: Shadow Council POV
WCSC.7 = {
	type = character_event
	title = WCSC_7_TITLE
	desc = {
		desc = WCSC_7_DESC
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = scheme
	}
	right_portrait = {
		character = scope:ntd_blackrock_holder
		animation = disapproval
	}
	
	immediate = {
		play_music_cue = "mx_cue_peace_ensues"
	}
	
	# Okay
	option = {
		name = WCSC_7.a
		custom_tooltip = WCSC_7.a.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
}

# The Answer: Twilights Hammer POV
WCSC.8  = {
	type = character_event
	title = WCSC_8_TITLE
	desc = {
		desc = WCSC_8_DESC
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain
	}
	left_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = scheme
	}
	right_portrait = {
		character = scope:ntd_blackrock_holder
		animation = disapproval
	}
	
	immediate = {
		play_music_cue = "mx_cue_peace_ensues"
	}
	
	# We need more lands
	option = {
		name = WCSC_8.a
		custom_tooltip = WCSC_8.a.tt
		
		scope:ntd_shadow_council_holder = {
			trigger_event = {
				id = WCSC.9
				days = 10
			}
		}
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 100
		}
	}
	# Okay fine
	option = {
		name = WCSC_8.b
		custom_tooltip = WCSC_8.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 0
		}
	}
}

# Choâ€™gall ask for lands as a reward of the good negotiations.
WCSC.9  = {
	type = character_event
	title = WCSC_9_TITLE
	desc = {
		desc = WCSC_9_DESC
	}
	theme = claim_throne_scheme
	override_background = {
		reference = wc_background_blackrock_mountain_center
	}
	left_portrait = {
		character = scope:ntd_twilights_hammer_holder
		animation = admiration
	}
	right_portrait = {
		character = scope:ntd_shadow_council_holder
		animation = personality_rational
	}
	
	# Seize more lands
	option = {
		name = WCSC_9.a
		custom_tooltip = WCSC_9.a.tt
		
		# Apply effects.
		more_blackrock_mountain_accept_effect = yes
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 90
		}
	}
	# Giving burning steppes
	option = {
		name = WCSC_9.b
		custom_tooltip = WCSC_9.b.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 10
		}
	}
	# Not for you
	option = {
		name = WCSC_9.c
		custom_tooltip = WCSC_9.c.tt
		
		# No stress for the basic option.
		ai_chance = {
			# AI should always be fairly likely to pick this.
			base = 0
		}
	}
}

### Invade this land ###